/* ta.js (c) Nino Kroesen. MIT License. */ async function median(n,e){for(var a=[],t=e||n.length;t<=n.length;t++){var r=n.slice(t-e,t);r.sort((n,e)=>n-e),a.push(r[Math.round(r.length/2)-1])}return a}async function kmeans(n,e){var a,t=[],r=[],l=[],s=!1,o=Math.round(n.length/(e+1));for(i=0;i<e;i++)r[i]=n[o*(i+1)];do{for(i=0;i<e;i++)t[i]=[];for(x=0;x<n.length;x++){var u=-1;for(y=0;y<e;y++){var h=Math.abs(r[y]-n[x]);-1===u?(u=h,a=y):h<=u&&(u=h,a=y)}t[a].push(n[x])}for(l=r,x=0;x<e;x++){var c=0;for(y=0;y<t[x].length;y++)c+=t[x][y];var p=c/t[a].length;r[x]=p}for(x=0;x<e;x++)r[x]!==l[x]&&(s=!0)}while(s);return t}async function normalize(n,e){e=e||0;for(var a=await Math.max.apply(null,n.slice())*(1+e),t=await Math.min.apply(null,n.slice())*(1-e),r=[],l=0;l<n.length;l++)r.push(1-(a-n[l])/(a-t));return r}async function denormalize(n,e,a){a=a||0;for(var t=await Math.max.apply(null,n.slice())*(1+a),r=await Math.min.apply(null,n.slice())*(1-a),l=[],s=0;s<e.length;s++)l.push(r+e[s]*(t-r));return l}async function normalize_pair(n,e){for(var a=(n[0]+e[0])/2,t=[[a,a]],r=1;r<n.length;r++)t.push([t[t.length-1][0]*((n[r]-n[r-1])/n[r-1]+1),t[t.length-1][1]*((e[r]-e[r-1])/e[r-1]+1)]);return t}async function normalize_from(n,e){for(var a=[e],t=1;t<n.length;t++)a.push(a[a.length-1]*((n[t]-n[t-1])/n[t-1]+1));return a}async function normalize_return(n,e){for(var a=[],t=0;t<n.length;t++)a.push(n[t]-e[t]);return a}async function standardize(n){for(var e=await sma(n,n.length),a=await std(n),t=[],r=0;r<n.length;r++)t.push((n[r]-e[0])/a);return t}async function mad(n,e){for(var a=e||n.length,t=[],r=a;r<=n.length;r++){var l=n.slice(r-a,r),s=await median(l),o=l.map(n=>Math.abs(n-s[s.length-1]));o=await median(o),t.push(o[o.length-1])}return t}async function aad(n,e){for(var a=e||n.length,t=[],r=a;r<=n.length;r++){var l=n.slice(r-a,r),s=0,o=await sma(l,a);for(q in l)s+=Math.abs(l[q]-o[o.length-1]);t.push(s/a)}return t}async function ssd(n,e){for(var a=e||n.length,t=[],r=a;r<=n.length;r++){var l=n.slice(r-a,r),s=await sma(l,a),o=0;for(let n in l)o+=(l[n]-s[s.length-1])**2;t.push(Math.sqrt(o))}return t}async function er(n){var e=[],a=[],t=1,r=1;for(let t in n)n[t]>=0?e.push(1+n[t]):a.push(1+n[t]);var l=e.length/n.length,s=a.length/n.length;for(let n in a)r*=a[n];for(let n in e)t*=e[n];return(100*(t**(1/e.length)-1)*l+100*(r**(1/a.length)-1)*s)/100}async function ar(n,e){for(var a=[],t=e;t<n.length;t++){var r=await er(n.slice(t-e,t));a.push(n[t]-r)}return a}async function kelly(n){var e=await er(n)+1,a=await winratio(n);return a-(1-a)/e}async function winratio(n){var e=0,a=0;for(let t in n)n[t]>=0?e++:a++;return e/(a+e)}async function avgwin(n){for(var e=[],a=0;a<n.length;a++)n[a]>=0&&e.push(n[a]);return(await sma(e,e.length))[0]}async function avgloss(n){for(var e=[],a=0;a<n.length;a++)n[a]<0&&e.push(n[a]);return(await sma(e,e.length))[0]}async function zscore(n,e){var a=[],t=n.slice(0,e-1);for(let s=e-1;s<n.length;s++){t.push(n[s]);var r=await sma(t,e),l=await std(t,e);a.push((n[s]-r[0])/l),t.splice(0,1)}return a}async function rsi(n,e){for(var a=e||14,t=[],r=n.slice(0,a),l=a,s=0,o=0;l<n.length;l++,s=0,o=0){r.push(n[l]);for(var u=1;u<r.length;u++)r[u]-r[u-1]<0?o+=Math.abs(r[u]-r[u-1]):s+=r[u]-r[u-1];var h=100-100/(1+s/a/(o/a));t.push(h),r.splice(0,1)}return t}async function wrsi(n,e){for(var a=e||14,t=[],r=[],l=[],s=1;s<n.length;s++)n[s]-n[s-1]<0?(l.push(Math.abs(n[s]-n[s-1])),r.push(0)):(l.push(0),r.push(n[s]-n[s-1]));l=await wsma(l,a),r=await wsma(r,a);for(let n in l)t.push(100-100/(1+r[n]/l[n]));return t}async function tsi(n,e,a,t){for(var r=e||25,l=a||13,s=t||13,o=[],u=[],h=[],i=[],c=1;c<n.length;c++)o.push(n[c]-n[c-1]),u.push(Math.abs(n[c]-n[c-1]));var p=await ema(o,r),f=await ema(u,r),g=await ema(p,l),m=await ema(f,l);for(c=0;c<g.length;c++)h.push(g[c]/m[c]);var v=await ema(h,s);h.splice(0,h.length-v.length);for(c=0;c<v.length;c++)i.push([v[c],h[c]]);return i}async function bop(n,e){var a=n.map(n=>(n[3]-n[0])/(n[1]-n[2]));e=e||14;return a=await sma(a,e)}async function fi(n,e){for(var a=e||13,t=[],r=[],l=1;l<n.length;l++)if(t.push((n[l][0]-n[l-1][0])*n[l][1]),t.length>=a){var s=await ema(t,a);r.push(s[s.length-1]),t.splice(0,1)}return r}async function asi(n){for(var e=[],a=1;a<n.length;a++){var t,r=n[a][1],l=n[a-1][1],s=n[a][0],o=n[a-1][0],u=n[a][2],h=n[a-1][2],i=o-r>h-r?o-r:h-r,c=n[a][0],p=n[a-1][0],f=Math.max(n[a][0],n[a-1][0])-Math.min(n[a][2],n[a-1][2]);s-l>u-l&&s-l>s-u&&(t=s-l-(u-l)/2+(l-p)/4),u-l>s-l&&u-l>s-u&&(t=u-l-(s-l)/2+(l-p)/4),s-u>s-l&&s-u>u-l&&(t=s-u+(l-p)/4),e.push((l-r+(l-p)/2+(r-c)/2)/t*50*i/f)}return e}async function ao(n,e,a){var t=e||5,r=a||35,l=[];n=n.map(n=>(n[0]+n[1])/2);for(var s=r;s<=n.length;s++){var o=n.slice(s-r,s),u=await sma(o,t),h=await sma(o,r);l.push(u[u.length-1]-h[h.length-1])}return l}async function ac(n,e,a){e=e||5,a=a||35;var t=await ao(n,e,a),r=await sma(t,e),l=[];t.length>r.length?t.splice(0,t.length-r.length):r.splice(0,r.length-t.length);for(let n in t)l.push(t[n]-r[n]);return l}async function fib(n,e){return[n,.236*(e-n)+n,.382*(e-n)+n,.5*(e-n)+n,.618*(e-n)+n,.786*(e-n)+n,e,1.618*(e-n)+n,2.618*(e-n)+n,3.618*(e-n)+n,4.236*(e-n)+n]}async function pr(n,e){for(var a=e||14,t=[],r=a;r<=n.length;r++){var l=n.slice(r-a,r),s=await Math.max.apply(null,l),o=await Math.min.apply(null,l);t.push((s-n[r-1])/(s-o)*-100)}return t}async function lsma(n,e){for(var a=e||25,t=[],r=a;r<=n.length;r++){for(var l,s,o=n.slice(r-a,r),u=0,h=0,i=0,c=0,p=1;p<=a;p++)u+=p,h+=o[p-1],i+=o[p-1]*p,c+=p*p,o[p-1]*o[p-1];s=h/a-(l=(i-u*h/a)/(c-u*u/a))*u/a,t.push(l*a+s)}return t}async function don(n,e){for(var a=[],t=e||20,r=t;r<=n.length;r++){var l=n.slice(r-t,r),s=[],o=[];for(let n in l)s.push(l[n][0]),o.push(l[n][1]);var u=Math.max.apply(null,s.slice()),h=Math.min.apply(null,o.slice());a.push([u,(u+h)/2,h])}return a}async function ichimoku(n,e,a,t,r){for(var l=[],s=e||9,o=a||26,u=t||52,h=r||26,i=[],c=[],p=0;p<n.length;p++)if(l.push(n[p]),l.length>=u){var f=[],g=[];for(let n in l)f.push(l[n][0]),g.push(l[n][2]);var m=(Math.max.apply(null,f.slice(f.length-s,f.length))+Math.min.apply(null,g.slice(g.length-s,g.length)))/2,v=(Math.max.apply(null,f.slice(f.length-o,f.length))+Math.min.apply(null,g.slice(g.length-o,g.length)))/2,d=n[p][1]+v,x=(Math.max.apply(null,f.slice(f.length-u,f.length))+Math.min.apply(null,g.slice(g.length-o,g.length)))/2;chik=n[p][1],c.push([m,v,d,x,chik]),l.splice(0,1)}for(p=h;p<c.length-h;p++)i.push([c[p][0],c[p][1],c[p+h][2],c[p+h][3],c[p-h][4]]);return i}async function stoch(n,e,a,t){var r=e||14,l=a||3,s=t||3,o=[],u=[],h=[],i=[];r<l&&([r,l]=[l,r]),s>l&&([s,l]=[l,s]);for(var c=0;c<n.length;c++){if(u.push(n[c][0]),h.push(n[c][2]),u.length>=r){var p=await Math.max.apply(null,u),f=await Math.min.apply(null,h),g=100*(n[c][1]-f)/(p-f);i.push(g)}if(s>0&&i.length>s){var m=await sma(i,s);i.push(m[m.length-1])}if(i.length-s>=l){var v=await sma(i,l);o.push([g,v[v.length-1]]),u.splice(0,1),h.splice(0,1),i.splice(0,1)}}return o}async function atr(n,e){for(var a=e||14,t=[n[0][0]-n[0][2]],r=1;r<n.length;r++){var l=await Math.max(n[r][0]-n[r-1][1],n[r][2]-n[r-1][1],n[r][0]-n[r][2]);t.push((t[t.length-1]*(a-1)+l)/a)}return t}async function sma(n,e){for(var a=e||14,t=[],r=a,l=0;r<=n.length;r++,l=0){var s=n.slice(r-a,r);for(q in s)l+=s[q];t.push(l/a)}return t}async function smma(n,e){for(var a=e||14,t=[],r=a;r<=n.length;r++){var l=n.slice(r-a,r),s=0;for(q in l)s+=l[q];t.length<=0?t.push(s/a):t.push((s-t[t.length-1])/a)}return t.splice(0,1),t}async function wma(n,e){for(var a=e||14,t=0,r=[],l=1;l<=a;l++)t+=l;for(l=a;l<=n.length;l++){var s=n.slice(l-a,l),o=0;for(q in s)o+=s[q]*(Number(q)+1)/t;r.push(o)}return r}async function wsma(n,e){for(var a=e||14,t=[],r=1/a,l=a;l<=n.length;l++)if(t.length>0)t.push((n[l-1]-t[t.length-1])*r+t[t.length-1]);else{var s=n.slice(l-a,l),o=0;for(q in s)o+=s[q];t.push(o/a)}return t}async function pwma(n,e){for(var a=0,t=[],r=[],l=e||14,s=l/2,o=e;s>=1;s--,o--)s%1!=0?a+=(s=Math.round(s))*o:(r.push(s*o),a+=s*o*2),r.unshift(s*o);for(s=l;s<=n.length;s++){for(var u=0,h=n.slice(s-l,s),i=l-1;i>=0;i--)u+=h[i]*r[i]/a;t.push(u)}return t}async function hwma(n,e){for(var a=0,t=[],r=[],l=e||14,s=1,o=l;s<=l/2;s++,o--)s%1!=0?a+=(s=Math.round(s))*o:(r.push(s*o),a+=s*o*2),r.unshift(s*o);for(s=l;s<=n.length;s++){for(var u=0,h=n.slice(s-l,s),i=l-1;i>=0;i--)u+=h[i]*r[i]/a;t.push(u)}return t}async function vwma(n,e){for(var a=e||20,t=[],r=(n=n.map(n=>[n[0]*n[1],n[1]]),a);r<=n.length;r++){for(var l=n.slice(r-a,r),s=0,o=0,u=0;u<l.length;u++)s+=l[u][1],o+=l[u][0];t.push(o/s)}return t}async function ema(n,e){for(var a=e||12,t=[],r=2/(a+1),l=a;l<=n.length;l++)if(t.length>0)t.push((n[l-1]-t[t.length-1])*r+t[t.length-1]);else{var s=n.slice(l-a,l),o=0;for(q in s)o+=s[q];t.push(o/a)}return t}async function hull(n,e){var a=e||14,t=[],r=[],l=await wma(n,a),s=Math.round(Math.sqrt(a)),o=await wma(n,Math.round(a/2));o.splice(0,o.length-l.length);for(let n in l)if(t.push(2*o[n]-l[n]),t.length>=s){var u=await wma(t,s);r.push(u[0]),t.splice(0,1)}return r}async function kama(n,e,a,t){e=e||10,a=a||2,t=t||30;for(var r=[(r=await sma(n,e))[r.length-1]],l=e+1;l<n.length;l++){for(var s=0,o=Math.abs(n[l]-n[l-e]),u=1;u<e;u++)s+=Math.abs(n[l-u]-n[l-u-1]);var h=(o/s*(2/(a+1)-2/(t+1)+2/(t+1)))**2;r.push(r[r.length-1]+h*(n[l]-r[r.length-1]))}return r}async function macd(n,e,a){var t=e||12,r=a||26;t>r&&([t,r]=[r,t]);var l=await ema(n,t),s=await ema(n,r),o=[];l.splice(0,r-t);for(var u=0;u<s.length;u++)o.push(l[u]-s[u]);return o}async function bands(n,e,a){for(var t=e||14,r=a||1,l=[],s=[],o=[],u=await sma(n,t),h=0;h<n.length;h++)if(l.push(n[h]),l.length>=t){var i=await std(l,t);s.push(i),l.splice(0,1)}for(h=0;h<u.length;h++)o.push([u[h]+s[h]*r,u[h],u[h]-s[h]*r]);return o}async function bandwidth(n,e,a){for(var t=e||14,r=a||1,l=[],s=await bands(n,t,r),o=0;o<s.length;o++)l.push((s[o][0]-s[o][2])/s[o][1]);return l}async function keltner(n,e,a){var t,r=e||14,l=a||1,s=[],o=await atr(n,r),u=[];for(var h in n)s.push((n[h][0]+n[h][1]+n[h][2])/3);t=await sma(s,r),o.splice(0,r-1);for(h=0;h<t.length;h++)u.push([t[h]+o[h]*l,t[h],t[h]-o[h]*l]);return u}async function variance(n,e){for(var a=e||n.length,t=[],r=a;r<=n.length;r++){var l=n.slice(r-a,r),s=await sma(l,a),o=0;for(x in l)o+=(l[x]-s[s.length-1])**2;t.push(o/a)}return t}async function std(n,e){var a=e||n.length,t=n.reduce((n,e)=>Number(n)+Number(e))/a;return Math.sqrt(n.reduce((n,e)=>n+Math.pow(e-t,2),0)/a)}async function normsinv(n){var e=-.00778489400243029,a=-.322396458041136,t=-2.40075827716184,r=-2.54973253934373,l=4.37466414146497,s=2.93816398269878,o=.00778469570904146,u=.32246712907004,h=2.445134137143,i=3.75440866190742;if(n<0||n>1)return 0;if(n<.02425)return(((((e*(c=Math.sqrt(-2*Math.log(n)))+a)*c+t)*c+r)*c+l)*c+s)/((((o*c+u)*c+h)*c+i)*c+1);if(n<=.97575){var c,p=(c=n-.5)*c;return(((((-39.6968302866538*p+220.946098424521)*p-275.928510446969)*p+138.357751867269)*p-30.6647980661472)*p+2.50662827745924)*c/(((((-54.4760987982241*p+161.585836858041)*p-155.698979859887)*p+66.8013118877197)*p-13.2806815528857)*p+1)}return-(((((e*(c=Math.sqrt(-2*Math.log(1-n)))+a)*c+t)*c+r)*c+l)*c+s)/((((o*c+u)*c+h)*c+i)*c+1)}async function sim(n,e,a,t){for(var r=[],l=(e=e||50,a=a||1e3,0);l<a;l++){for(var s=n.slice(),o=0;o<e;o++){for(var u=[],h=1;h<s.length;h++){var i=await dif(s[h],s[h-1]);u.push(i)}var c=await sma(u,u.length),p=await std(u),f=await normsinv(Math.random());s.push(s[s.length-1]*Math.exp(c[0]-p*p/2+p*f))}r.push(s)}return t?await percentile(r,t):r}async function percentile(n,e){for(var a=[],t=0;t<n[0].length;t++)n.sort((n,e)=>n[t]-e[t]),a.push(n[Math.round((n.length-1)*e)][t]);return a}async function cor(n,e){for(var a=await sma(n,n.length),t=await sma(e,e.length),r=0,l=0,s=0,o=0;o<n.length;o++){var u=n[o]-a,h=e[o]-t;r+=u*h,l+=Math.pow(u,2),s+=Math.pow(h,2)}var i=n.length-1;return l/=i,s/=i,r/(i*(l=Math.sqrt(l))*(s=Math.sqrt(s)))}async function dif(n,e){return(n-e)/e}async function drawdown(n){for(var e=n[0],a=n[0],t=0,r=1;r<n.length;r++){if(n[r]>e){if(0!=a)(l=await dif(a,e))<t&&(t=l),a=n[r];e=n[r]}n[r]<a&&(a=n[r])}var l;return(l=await dif(a,e))<t&&(t=l),t}async function aroon_up(n,e){for(var a=e||10,t=[],r=a;r<=n.length;r++){var l=n.slice(r-a,r),s=l.slice();s.sort((n,e)=>n-e),t.push(100*(a-1-l.reverse().findIndex(n=>n===s[a-1]))/(a-1))}return t}async function aroon_down(n,e){for(var a=e||10,t=[],r=a;r<=n.length;r++){var l=n.slice(r-a,r),s=l.slice();s.sort((n,e)=>n-e),t.push(100*(a-1-l.reverse().findIndex(n=>n===s[0]))/(a-1))}return t}async function aroon_osc(n,e){for(var a=e||25,t=[],r=await aroon.up(n,a),l=await aroon.down(n,a),s=0;s<r.length;s++)t.push(r[s]-l[s]);return t}async function mfi(n,e){for(var a=e||14,t=[],r=n.map(n=>n[1]),l=n.map(n=>n[0]),s=a;s<=n.length;s++){var o=0,u=0;for(q=s-a;q<s;q++)o+=l[q],u+=r[q];t.push(100-100/(1+o/u))}return t}async function roc(n,e){for(var a=e||14,t=[],r=a;r<=n.length;r++)t.push((n[r-1]-n[r-a])/n[r-a]);return t}async function cop(n,e,a,t){e=e||11,a=a||14,t=t||10,max=Math.max(e,a),co=[];for(var r=max+t;r<n.length;r++){var l=n.slice(r-(max+t),r),s=l.slice(),o=[];l=await roc(l,e),s=await roc(s,a),l.splice(0,l.length-s.length),s.splice(0,s.length-l.length);for(var u=0;u<l.length;u++)o.push(l[u]+s[u]);o=await wma(o,t),co.push(o[o.length-1])}return co}async function kst(n,e,a,t,r,l,s,o,u,h){e=e||10,a=a||15,t=t||20,r=r||30,l=l||10,s=s||10,o=o||10,u=u||15,h=h||9;for(var i=[],c=[],p=Math.max(e,a,t,r)+Math.max(l,s,o,u),f=p;f<=n.length;f++){var g=n.slice(f-p,f),m=await roc(g,e),v=await roc(g,a),d=await roc(g,t),x=await roc(g,r);m=await sma(m,l),v=await sma(v,s),d=await sma(d,o),x=await sma(x,u),i.push(m[m.length-1]+v[v.length-1]+d[d.length-1]+x[x.length-1])}var w=await sma(i,h);for(var f in i.splice(0,i.length-w.length),w)c.push([i[f],w[f]]);return c}async function obv(n){for(var e=[0],a=1;a<n.length;a++)n[a][1]>n[a-1][1]&&e.push(e[e.length-1]+n[a][0]),n[a][1]<n[a-1][1]&&e.push(e[e.length-1]-n[a][0]),n[a][1]===n[a-1][1]&&e.push(e[e.length-1]);return e}async function vwap(n,e){for(var a=!e||e>n.length?n.length:e,t=(n=n.map(n=>[n[0]*n[1],n[1]]),[]),r=a;r<=n.length;r++){for(var l=n.slice(r-a,r),s=0,o=0,u=0;u<l.length;u++)s+=l[u][1],o+=l[u][0];t.push(o/s)}return t}async function mom(n,e,a){for(var t=e||10,r=[],l=t-1;l<n.length;l++)a?r.push(n[l]/n[l-(t-1)]*100):r.push(n[l]-n[l-(t-1)]);return r}async function mom_osc(n,e){for(var a=e?e+1:10,t=[],r=a;r<=n.length;r++){for(var l=0,s=0,o=1;o<a;o++)n[r-a+(o-1)]<n[r-a+o]?l+=n[r-a+o]:s+=n[r-a+o];t.push((l-s)/(l+s)*100)}return t}async function ha(n){for(var e=[[(Number(n[0][0])+Number(n[0][3]))/2,Number(n[0][1]),Number(n[0][2]),(Number(n[0][0])+Number(n[0][1])+Number(n[0][2])+Number(n[0][3]))/4]],a=1;a<n.length;a++)e.push([(e[e.length-1][0]+e[e.length-1][3])/2,Math.max(e[e.length-1][0],e[e.length-1][3],n[a][1]),Math.min(e[e.length-1][0],e[e.length-1][3],n[a][2]),(n[a][0]+n[a][1]+n[a][2]+n[a][3])/4]);return e}async function ren(n,e){for(var a=[],t=(e=e||1,Math.floor(e)===e?0:e.toString().split(".")[1].length||0),r=Math.ceil(n[0][0]/e*10**t)/10**t*e,l=r-e,s=1;s<n.length;s++){if(n[s][0]>r+e)do{a.push([r,r+e,r,r+e]),r+=e,l+=e}while(n[s][0]>r+e);if(n[s][1]<l-e)do{a.push([l,l,l-e,l-e]),r-=e,l-=e}while(n[s][1]<l-e)}return a}async function envelope(n,e,a){a=a||.005;for(var t=[],r=e=e||10;r<n.length;r++){var l=await sma(n.slice(r-e,r),e);t.push([l[0]*(1+a),l[0],l[0]*(1-a)])}return t}async function chaikin_osc(n,e,a){e=e||3,a=a||10;for(var t=[],r=[],l=0;l<n.length;l++){var s=(n[l][1]-n[l][2]-(n[l][0]-n[l][1]))/(n[l][0]-n[l][2]);isNaN(s)?r.push(0):r.push(s*n[l][3])}var o=await ema(r,e),u=await ema(r,a);o.length>u.length?o.splice(0,o.length-u.length):u.splice(0,u.length-o.length);for(l=0;l<o.length;l++)t.push(o[l]-u[l]);return t}async function fractals(n){for(var e=[[!1,!1],[!1,!1]],a=2;a<n.length-2;a++){var t=n[a-2][0]<n[a][0]&&n[a-1][0]<n[a][0]&&n[a][0]>n[a+1][0]&&n[a][0]>n[a+2][0],r=n[a-2][1]>n[a][1]&&n[a-1][1]>n[a][1]&&n[a][1]<n[a+1][1]&&n[a][1]<n[a+2][1];e.push([t,r])}return e.push([!1,!1],[!1,!1]),e}async function alligator(n,e,a,t,r,l,s){e=e||13,a=a||8,t=t||5,r=r||8,l=l||5,s=s||3;var o=[],u=await smma(n,e),h=await smma(n,a),i=await smma(n,t);h.splice(0,h.length-u.length),i.splice(0,i.length-u.length);for(var c=u.length-1;c>=7;c--)o.push([u[c-(r-1)],h[c-(l-1)],i[c-(s-1)]]);return o}async function gator(n,e,a,t,r,l,s){e=e||13,a=a||8,t=t||5,r=r||8,l=l||5,s=s||3;var o=[],u=await smma(n,e),h=await smma(n,a),i=await smma(n,t);h.splice(0,h.length-u.length),i.splice(0,i.length-u.length);for(var c=u.length-1;c>=r-1;c--)o.push([u[c-(r-1)]-h[c-(l-1)],-Math.abs(h[c-(l-1)]-i[c-(s-1)])]);return o}async function recent_high(n,e){for(var a=e=e||25,t=0,r=n[n.length-1],l=n.length-2;l>=0&&(n[l]>=r&&a>0?(r=n[l],t=l,a=e):a--,!(a<=0));l--);return{index:t,value:r}}async function recent_low(n,e){for(var a=e=e||25,t=0,r=n[n.length-1],l=n.length-2;l>=0&&(n[l]<=r&&a>0?(r=n[l],t=l,a=e):a--,!(a<=0));l--);return{index:t,value:r}}async function support(n,e){var a,t,r=(e=e||await recent_low(n)).value;do{for(var l=e.index;l<n.length;l++){var s=(e.value-n[l])/(e.index-l);s<r&&(r=s,a=l)}e.index+1==a&&a!=n.length-1?(e.index=a,r=Math.min.apply(null,n.slice()),e.value=n[e.index],t=!1):t=!0,e.index==n.length-1&&(t=!0)}while(!t);return a==n.length-1||e.index==n.length-1?{calculate:async n=>e.value,slope:0,lowest:e.value,index:e.index}:{calculate:async n=>n*r+e.value,slope:r,lowest:e.value,index:e.index}}async function resistance(n,e){var a,t,r=(e=e||await recent_high(n)).value;do{for(var l=e.index;l<n.length;l++){var s=(n[l]-e.value)/(e.index-l);s<r&&(r=s,a=l)}e.index+1==a&&a!=n.length-1?(e.index=a,r=Math.max.apply(null,n.slice()),e.value=n[e.index],t=!1):t=!0,e.index==n.length-1&&(t=!0)}while(!t);return a==n.length-1||e.index==n.length-1?{calculate:async n=>e.value,slope:0,highest:e.value,index:e.index}:{calculate:async n=>n*-r+e.value,slope:r,highest:e.value,index:e.index}}async function fisher(n,e){var a=[],t=0,r=0;for(let u=e;u<n.length;u++){var l=n.slice(u-e,u),s=t,o=Math.min.apply(null,l);(r=.66*((n[u]-o)/(Math.max.apply(null,l)-o)-.5)+.67*r)>.99&&(r=.999),r<-.99&&(r=-.999),t=.5*Math.log((1+r)/(1-r))+.5*s,a.push([t,s])}return a.slice(1,a.length)}async function cross(n,e){n.splice(0,n.length-e.length);for(var a=n[0]>e[0],t=[],r=0;r<n.length;r++)n[r]<e[r]&&a&&(t.push({index:r,cross:!1}),a=!1),n[r]>e[r]&&!a&&(t.push({index:r,cross:!0}),a=!0);return t}async function se(n,e){return e=e||n.length,await std(n)/e**.5}const aroon={up:aroon_up,down:aroon_down,osc:aroon_osc}
