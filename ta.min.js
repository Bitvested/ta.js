/* ta.js (c) Nino Kroesen. MIT License. */ async function median(n,a=n.length){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e);r.sort((n,a)=>n-a),t.push(r[Math.round(r.length/2)-1])}return t}async function kmeans(n,a){for(var e,t=[],r=[],_=[],l=!1,$=Math.round(n.length/(a+1)),s=0;s<a;s++)r[s]=n[$*(s+1)];do{for(var s=0;s<a;s++)t[s]=[];for(var i=0;i<n.length;i++){for(var h=-1,u=0;u<a;u++){var o=Math.abs(r[u]-n[i]);-1===h?(h=o,e=u):o<=h&&(h=o,e=u)}t[e].push(n[i])}_=r;for(var i=0;i<a;i++){for(var p=0,u=0;u<t[i].length;u++)p+=t[i][u];var c=p/t[e].length;r[i]=c}for(var i=0;i<a;i++)r[i]!==_[i]&&(l=!0)}while(l);return t}async function normalize(n,a=0){for(var e=0,t=await Math.max.apply(null,n.slice())*(1+a),r=await Math.min.apply(null,n.slice())*(1-a),_=[];e<n.length;e++)_.push(1-(t-n[e])/(t-r));return _}async function denormalize(n,a,e=0){for(var t=0,r=await Math.max.apply(null,n.slice())*(1+e),_=await Math.min.apply(null,n.slice())*(1-e),l=[];t<a.length;t++)l.push(_+a[t]*(r-_));return l}async function normalize_pair(n,a){for(var e=1,t=(n[0]+a[0])/2,r=[[t,t]];e<n.length;e++)r.push([r[r.length-1][0]*((n[e]-n[e-1])/n[e-1]+1),r[r.length-1][1]*((a[e]-a[e-1])/a[e-1]+1)]);return r}async function normalize_from(n,a){for(var e=1,t=[a];e<n.length;e++)t.push(t[t.length-1]*((n[e]-n[e-1])/n[e-1]+1));return t}async function standardize(n){for(var a=await sma(n,n.length),e=await std(n),t=[],r=0;r<n.length;r++)t.push((n[r]-a[0])/e);return t}async function mad(n,a=n.length){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=await median(r),l=r.map(n=>Math.abs(n-_[_.length-1]));l=await median(l),t.push(l[l.length-1])}return t}async function aad(n,a=n.length){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=0,l=await sma(r,a);for(var $ in r)_+=Math.abs(r[$]-l[l.length-1]);t.push(_/a)}return t}async function ssd(n,a=n.length){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=await sma(r,a),l=0;for(var $ in r)l+=(r[$]-_[_.length-1])**2;t.push(Math.sqrt(l))}return t}async function er(n){var a=[],e=[],t=1,r=1;for(var _ in n)n[_]>=0?a.push(1+n[_]):e.push(1+n[_]);var l=a.length/n.length,$=e.length/n.length;for(var _ in e)r*=e[_];for(var _ in a)t*=a[_];return((t**(1/a.length)-1)*100*l+(r**(1/e.length)-1)*100*$)/100}async function ar(n,a=n.length){for(var e=a,t=[];e<n.length;e++){var r=await er(n.slice(e-a,e));t.push(n[e]-r)}return t}async function kelly(n){var a=await er(n)+1,e=await winratio(n);return isNaN(a)&&(a=1),e-(1-e)/a}async function martingale(n,a,e,t=2){var r=a;for(var _ in n)n[_]<0?r*=t:n[_]>0&&(r=a);return r>e?e:r}async function antimartingale(n,a,e,t=2){var r=a;for(var _ in n)n[_]>0?r*=t:n[_]<0&&(r=a);return r>e?e:r}async function winratio(n){var a=0,e=0;for(var t in n)n[t]>=0?a++:e++;return a/(e+a)}async function avgwin(n){for(var a=0,e=[];a<n.length;a++)n[a]>=0&&e.push(n[a]);return(await sma(e,e.length))[0]}async function avgloss(n){for(var a=[],e=0;e<n.length;e++)n[e]<0&&a.push(n[e]);return(await sma(a,a.length))[0]}async function zscore(n,a=n.length){for(var e=a-1,t=[],r=n.slice(0,a-1);e<n.length;e++){r.push(n[e]);var _=await sma(r,a),l=await std(r,a);t.push((n[e]-_[0])/l),r.splice(0,1)}return t}async function rsi(n,a=14){for(var e=a-1,t=0,r=0,_=[],l=n.slice(0,a-1);e<n.length;e++,t=0,r=0){l.push(n[e]);for(var $=1;$<l.length;$++)l[$]-l[$-1]<0?r+=Math.abs(l[$]-l[$-1]):t+=l[$]-l[$-1];var s=100-100/(1+t/a/(r/a));_.push(s),l.splice(0,1)}return _}async function wrsi(n,a=14){for(var e=1,t=[],r=[],_=[];e<n.length;e++)n[e]-n[e-1]<0?(_.push(Math.abs(n[e]-n[e-1])),r.push(0)):(_.push(0),r.push(n[e]-n[e-1]));for(var e in _=await wsma(_,a),r=await wsma(r,a),_)t.push(100-100/(1+r[e]/_[e]));return t}async function tsi(n,a=25,e=13,t=13){for(var r=1,_=[],l=[],$=[],s=[];r<n.length;r++)_.push(n[r]-n[r-1]),l.push(Math.abs(n[r]-n[r-1]));for(var i=await ema(_,a),h=await ema(l,a),u=await ema(i,e),o=await ema(h,e),r=0;r<u.length;r++)$.push(u[r]/o[r]);var p=await ema($,t);$.splice(0,$.length-p.length);for(var r=0;r<p.length;r++)s.push([p[r],$[r]]);return s}async function bop(n,a=14){var e=n.map(n=>(n[3]-n[0])/(n[1]-n[2])),e=await sma(e,a);return e}async function fi(n,a=13){for(var e=1,t=[],r=[];e<n.length;e++)if(t.push((n[e][0]-n[e-1][0])*n[e][1]),t.length>=a){var _=await ema(t,a);r.push(_[_.length-1]),t.splice(0,1)}return r}async function asi(n){for(var a=1,e=[];a<n.length;a++){var t,r=n[a][1],_=n[a-1][1],l=n[a][0],$=n[a-1][0],s=n[a][2],i=n[a-1][2],h=$-r>i-r?$-r:i-r,u=n[a][0],o=n[a-1][0],p=Math.max(n[a][0],n[a-1][0])-Math.min(n[a][2],n[a-1][2]);l-_>s-_&&l-_>l-s&&(t=l-_-(s-_)/2+(_-o)/4),s-_>l-_&&s-_>l-s&&(t=s-_-(l-_)/2+(_-o)/4),l-s>l-_&&l-s>s-_&&(t=l-s+(_-o)/4),e.push(50*((_-r+(_-o)/2+(r-u)/2)/t)*h/p)}return e}async function ao(n,a=5,e=35){n=n.map(n=>(n[0]+n[1])/2);for(var t=e,r=[];t<=n.length;t++){var _=n.slice(t-e,t),l=await sma(_,a),$=await sma(_,e);r.push(l[l.length-1]-$[$.length-1])}return r}async function ac(n,a=5,e=35){var t=await ao(n,a,e),r=await sma(t,a),_=[];for(var l in t.length>r.length?t.splice(0,t.length-r.length):r.splice(0,r.length-t.length),t)_.push(t[l]-r[l]);return _}const fib=async(n,a)=>[n,(a-n)*.236+n,(a-n)*.382+n,(a-n)*.5+n,(a-n)*.618+n,(a-n)*.786+n,a,(a-n)*1.618+n,(a-n)*2.618+n,(a-n)*3.618+n,(a-n)*4.236+n];async function pr(n,a=14){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=await Math.max.apply(null,r),l=await Math.min.apply(null,r);t.push(-((_-n[e-1])/(_-l)*100))}return t}async function lsma(n,a=25){for(var e=a,t=[];e<=n.length;e++){for(var r,_,l=n.slice(e-a,e),$=0,s=0,i=0,h=0,u=0,o=1;o<=a;o++)$+=o,s+=l[o-1],i+=l[o-1]*o,h+=o*o,u+=l[o-1]*l[o-1];r=(i-$*s/a)/(h-$*$/a),_=s/a-r*$/a,t.push(r*a+_)}return t}async function don(n,a=20){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=[],l=[];for(var $ in r)_.push(r[$][0]),l.push(r[$][1]);var s=Math.max.apply(null,_.slice()),i=Math.min.apply(null,l.slice());t.push([s,(s+i)/2,i])}return t}async function ichimoku(n,a=9,e=26,t=52,r=26){for(var _=0,l=[],$=[],s=[];_<n.length;_++)if(l.push(n[_]),l.length>=t){var i=[],h=[];for(var u in l)i.push(l[u][0]),h.push(l[u][2]);var o=(Math.max.apply(null,i.slice(i.length-a,i.length))+Math.min.apply(null,h.slice(h.length-a,h.length)))/2,p=(Math.max.apply(null,i.slice(i.length-e,i.length))+Math.min.apply(null,h.slice(h.length-e,h.length)))/2,c=n[_][1]+p,g=(Math.max.apply(null,i.slice(i.length-t,i.length))+Math.min.apply(null,h.slice(h.length-e,h.length)))/2;chik=n[_][1],s.push([o,p,c,g,chik]),l.splice(0,1)}for(var _=r;_<s.length-r;_++)$.push([s[_][0],s[_][1],s[_+r][2],s[_+r][3],s[_-r][4]]);return $}async function stoch(n,a=14,e=3,t=3){a<e&&([a,e]=[e,a]),t>e&&([t,e]=[e,t]);for(var r=0,_=[],l=[],$=[],s=[];r<n.length;r++){if(l.push(n[r][0]),$.push(n[r][2]),l.length>=a){var i=await Math.max.apply(null,l),h=await Math.min.apply(null,$),u=100*(n[r][1]-h)/(i-h);s.push(u)}if(t>0&&s.length>t){var o=await sma(s,t);s.push(o[o.length-1])}if(s.length-t>=e){var p=await sma(s,e);_.push([u,p[p.length-1]]),l.splice(0,1),$.splice(0,1),s.splice(0,1)}}return _}async function atr(n,a=14){for(var e=1,t=[n[0][0]-n[0][2]];e<n.length;e++){var r=await Math.max(n[e][0]-n[e-1][1],n[e][2]-n[e-1][1],n[e][0]-n[e][2]);t.push((t[t.length-1]*(a-1)+r)/a)}return t}async function sma(n,a=14){for(var e=a,t=[];e<=n.length;e++){var r=await sum(n.slice(e-a,e));t.push(r/a)}return t}async function smma(n,a=14){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=0;for(var l in r)_+=r[l];t.length<=0?t.push(_/a):t.push((_-t[t.length-1])/a)}return t.splice(0,1),t}async function wma(n,a=14){for(var e=1,t=0,r=[];e<=a;e++)t+=e;for(var e=a;e<=n.length;e++){var _=n.slice(e-a,e),l=0;for(var $ in _)l+=_[$]*(Number($)+1)/t;r.push(l)}return r}async function wsma(n,a=14){for(var e=a,t=[],r=1/a;e<=n.length;e++){if(t.length>0){t.push((n[e-1]-t[t.length-1])*r+t[t.length-1]);continue}var _=n.slice(e-a,e),l=0;for(var $ in _)l+=_[$];t.push(l/a)}return t}async function pwma(n,a=14){for(var e=a/2,t=a,r=0,_=[],l=[];e>=1;e--,t--)e%1!=0?r+=(e=Math.round(e))*t:(l.push(e*t),r+=e*t*2),l.unshift(e*t);for(var e=a;e<=n.length;e++){for(var $=0,s=n.slice(e-a,e),i=a-1;i>=0;i--)$+=s[i]*l[i]/r;_.push($)}return _}async function hwma(n,a=14){for(var e=1,t=a,r=0,_=[],l=[];e<=a/2;e++,t--)e%1!=0?r+=(e=Math.round(e))*t:(l.push(e*t),r+=e*t*2),l.unshift(e*t);for(var e=a;e<=n.length;e++){for(var $=0,s=n.slice(e-a,e),i=a-1;i>=0;i--)$+=s[i]*l[i]/r;_.push($)}return _}async function vwma(n,a=20){n=n.map(n=>[n[0]*n[1],n[1]]);for(var e=a,t=[];e<=n.length;e++){for(var r=n.slice(e-a,e),_=0,l=0,$=0;$<r.length;$++)_+=r[$][1],l+=r[$][0];t.push(l/_)}return t}async function ema(n,a=12){for(var e=a,t=[],r=2/(a+1);e<=n.length;e++){if(t.length>0){t.push((n[e-1]-t[t.length-1])*r+t[t.length-1]);continue}var _=n.slice(e-a,e),l=0;for(var $ in _)l+=_[$];t.push(l/a)}return t}async function hull(n,a=14){var e=[],t=[],r=await wma(n,a),_=Math.round(Math.sqrt(a)),l=await wma(n,Math.round(a/2));for(var $ in l.splice(0,l.length-r.length),r)if(e.push(2*l[$]-r[$]),e.length>=_){var s=await wma(e,_);t.push(s[0]),e.splice(0,1)}return t}async function kama(n,a=10,e=2,t=30){for(var r=a+1,_=await sma(n,a),_=[_[_.length-1]];r<n.length;r++){for(var l=0,$=Math.abs(n[r]-n[r-a]),s=1;s<a;s++)l+=Math.abs(n[r-s]-n[r-s-1]);var i=($/l*(2/(e+1)-2/(t+1)+2/(t+1)))**2;_.push(_[_.length-1]+i*(n[r]-_[_.length-1]))}return _}async function macd(n,a=12,e=26){a>e&&([a,e]=[e,a]);var t=await ema(n,a),r=await ema(n,e),_=[];t.splice(0,e-a);for(var l=0;l<r.length;l++)_.push(t[l]-r[l]);return _}async function macd_signal(n,a=12,e=26,t=9){return await ema(await macd(n,a,e),t)}async function macd_bars(n,a=12,e=26,t=9){var r=await macd(n,a,e),_=await ema(r,t),l=[];for(var $ in r.splice(0,r.length-_.length),r)l.push(r[$]-_[$]);return l}async function bands(n,a=14,e=1){for(var t=0,r=[],_=[],l=[],$=await sma(n,a);t<n.length;t++)if(r.push(n[t]),r.length>=a){var s=await std(r,a);_.push(s),r.splice(0,1)}for(var t=0;t<$.length;t++)l.push([$[t]+_[t]*e,$[t],$[t]-_[t]*e]);return l}async function bandwidth(n,a=14,e=1){for(var t=0,r=[],_=await bands(n,a,e);t<_.length;t++)r.push((_[t][0]-_[t][2])/_[t][1]);return r}async function keltner(n,a=14,e=1){var t,r=[],_=await atr(n,a),l=[];for(var $ in n)r.push((n[$][0]+n[$][1]+n[$][2])/3);t=await sma(r,a),_.splice(0,a-1);for(var $=0;$<t.length;$++)l.push([t[$]+_[$]*e,t[$],t[$]-_[$]*e]);return l}async function variance(n,a=n.length){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=await sma(r,a),l=0;for(var $ in r)l+=(r[$]-_[_.length-1])**2;t.push(l/a)}return t}async function std(n,a=n.length){a<n.length&&n.splice(0,n.length-a);var e=n.reduce((n,a)=>n+a)/a;return Math.sqrt(n.reduce((n,a)=>n+Math.pow(a-e,2),0)/a)}async function normsinv(n){if(n<0||n>1)return 0;if(n<.02425){var a=Math.sqrt(-2*Math.log(n));return(((((-.00778489400243029*a+-.322396458041136)*a+-2.40075827716184)*a+-2.54973253934373)*a+4.37466414146497)*a+2.93816398269878)/((((.00778469570904146*a+.32246712907004)*a+2.445134137143)*a+3.75440866190742)*a+1)}if(n<=.97575){var a=n-.5,e=a*a;return(((((-39.6968302866538*e+220.946098424521)*e+-275.928510446969)*e+138.357751867269)*e+-30.6647980661472)*e+2.50662827745924)*a/(((((-54.4760987982241*e+161.585836858041)*e+-155.698979859887)*e+66.8013118877197)*e+-13.2806815528857)*e+1)}var a=Math.sqrt(-2*Math.log(1-n));return-(((((-.00778489400243029*a+-.322396458041136)*a+-2.40075827716184)*a+-2.54973253934373)*a+4.37466414146497)*a+2.93816398269878)/((((.00778469570904146*a+.32246712907004)*a+2.445134137143)*a+3.75440866190742)*a+1)}async function sim(n,a=50,e=1e3,t){for(var r=0,_=[];r<e;r++){for(var l=n.slice(),$=0;$<a;$++){for(var s=[],i=1;i<l.length;i++){var h=await dif(l[i],l[i-1]);s.push(h)}var u=await sma(s,s.length),o=await std(s),p=await normsinv(Math.random());l.push(l[l.length-1]*Math.exp(u[0]-o*o/2+o*p))}_.push(l)}return t?await percentile(_,t):_}async function percentile(n,a){for(var e=0,t=[];e<n[0].length;e++)n.sort((n,a)=>n[e]-a[e]),t.push(n[Math.round((n.length-1)*a)][e]);return t}async function cor(n,a){for(var e=await sma(n,n.length),t=await sma(a,a.length),r=0,_=0,l=0,$=0;$<n.length;$++){var s=n[$]-e,i=a[$]-t;r+=s*i,_+=Math.pow(s,2),l+=Math.pow(i,2)}var h=n.length-1;return _/=h,l/=h,r/(h*(_=Math.sqrt(_))*(l=Math.sqrt(l)))}const dif=async(n,a)=>(n-a)/a,log=async n=>n.map(n=>Math.log(n)),exp=async n=>n.map(n=>Math.exp(n));async function drawdown(n){for(var a=1,e=n[0],t=n[0],r=0;a<n.length;a++){if(n[a]>e){if(0!=t){var _=await dif(t,e);_<r&&(r=_),t=n[a]}e=n[a]}n[a]<t&&(t=n[a])}var _=await dif(t,e);return _<r&&(r=_),r}async function aroon_up(n,a=10){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=r.slice();_.sort((n,a)=>n-a),t.push(100*(a-1-r.reverse().findIndex(n=>n===_[a-1]))/(a-1))}return t}async function aroon_down(n,a=10){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=r.slice();_.sort((n,a)=>n-a),t.push(100*(a-1-r.reverse().findIndex(n=>n===_[0]))/(a-1))}return t}async function aroon_osc(n,a=25){for(var e=0,t=[],r=await aroon.up(n,a),_=await aroon.down(n,a);e<r.length;e++)t.push(r[e]-_[e]);return t}async function mfi(n,a=14){for(var e=a,t=[],r=n.map(n=>n[1]),_=n.map(n=>n[0]),l=0,$=0;e<=n.length;e++,l=0,$=0){for(var s=e-a;s<e;s++)l+=_[s],$+=r[s];t.push(100-100/(1+l/$))}return t}async function roc(n,a=14){for(var e=a,t=[];e<=n.length;e++)t.push((n[e-1]-n[e-a])/n[e-a]);return t}async function cop(n,a=11,e=14,t=10){for(var r=Math.max(a,e),_=[],l=r+t;l<n.length;l++){var $=n.slice(l-(r+t),l),s=$.slice(),i=[];$=await roc($,a),s=await roc(s,e),$.splice(0,$.length-s.length),s.splice(0,s.length-$.length);for(var h=0;h<$.length;h++)i.push($[h]+s[h]);i=await wma(i,t),_.push(i[i.length-1])}return _}async function kst(n,a=10,e=15,t=20,r=30,_=10,l=10,$=10,s=15,i=9){for(var h=[],u=[],o=Math.max(a,e,t,r)+Math.max(_,l,$,s),p=o;p<=n.length;p++){var c=n.slice(p-o,p),g=await roc(c,a),v=await roc(c,e),f=await roc(c,t),m=await roc(c,r);g=await sma(g,_),v=await sma(v,l),f=await sma(f,$),m=await sma(m,s),h.push(g[g.length-1]+v[v.length-1]+f[f.length-1]+m[m.length-1])}var x=await sma(h,i);for(var p in h.splice(0,h.length-x.length),x)u.push([h[p],x[p]]);return u}async function obv(n){for(var a=1,e=[0];a<n.length;a++)n[a][1]>n[a-1][1]&&e.push(e[e.length-1]+n[a][0]),n[a][1]<n[a-1][1]&&e.push(e[e.length-1]-n[a][0]),n[a][1]===n[a-1][1]&&e.push(e[e.length-1]);return e}async function vwap(n,a=n.length){n=n.map(n=>[n[0]*n[1],n[1]]);for(var e=a,t=[];e<=n.length;e++){for(var r=n.slice(e-a,e),_=0,l=0,$=0;$<r.length;$++)_+=r[$][1],l+=r[$][0];t.push(l/_)}return t}async function mom(n,a=10,e){for(var t=a-1,r=[];t<n.length;t++)e?r.push(n[t]/n[t-(a-1)]*100):r.push(n[t]-n[t-(a-1)]);return r}async function mom_osc(n,a=10){a++;for(var e=a,t=[],r=0,_=0;e<=n.length;e++,r=0,_=0){for(var l=1;l<a;l++)n[e-a+(l-1)]<n[e-a+l]?r+=n[e-a+l]:_+=n[e-a+l];t.push((r-_)/(r+_)*100)}return t}async function ha(n){for(var a=[[(n[0][0]+n[0][3])/2,n[0][1],n[0][2],(n[0][0]+n[0][1]+n[0][2]+n[0][3])/4]],e=1;e<n.length;e++)a.push([(a[a.length-1][0]+a[a.length-1][3])/2,Math.max(a[a.length-1][0],a[a.length-1][3],n[e][1]),Math.min(a[a.length-1][0],a[a.length-1][3],n[e][2]),(n[e][0]+n[e][1]+n[e][2]+n[e][3])/4]);return a}async function ren(n,a=1){for(var e=[],t=Math.floor(a)===a?0:a.toString().split(".")[1].length||0,r=Math.ceil(n[0][0]/a*10**t)/10**t*a,_=r-a,l=1;l<n.length;l++){if(n[l][0]>r+a)do e.push([r,r+a,r,r+a]),r+=a,_+=a;while(n[l][0]>r+a);if(n[l][1]<_-a)do e.push([_,_,_-a,_-a]),r-=a,_-=a;while(n[l][1]<_-a)}return e}async function envelope(n,a=10,e=.005){for(var t=a,r=[];t<n.length;t++){var _=await sma(n.slice(t-a,t),a);r.push([_[0]*(1+e),_[0],_[0]*(1-e)])}return r}async function chaikin_osc(n,a=3,e=10){for(var t=0,r=[],_=[];t<n.length;t++){var l=(n[t][1]-n[t][2]-(n[t][0]-n[t][1]))/(n[t][0]-n[t][2]);isNaN(l)?_.push(0):_.push(l*n[t][3])}var $=await ema(_,a),s=await ema(_,e);$.length>s.length?$.splice(0,$.length-s.length):s.splice(0,s.length-$.length);for(var t=0;t<$.length;t++)r.push($[t]-s[t]);return r}async function fractals(n){for(var a=[[!1,!1],[!1,!1]],e=2;e<n.length-2;e++){var t=n[e-2][0]<n[e][0]&&n[e-1][0]<n[e][0]&&n[e][0]>n[e+1][0]&&n[e][0]>n[e+2][0],r=n[e-2][1]>n[e][1]&&n[e-1][1]>n[e][1]&&n[e][1]<n[e+1][1]&&n[e][1]<n[e+2][1];a.push([t,r])}return a.push([!1,!1],[!1,!1]),a}async function alligator(n,a=13,e=8,t=5,r=8,_=5,l=3){var $=[],s=await smma(n,a),i=await smma(n,e),h=await smma(n,t);i.splice(0,i.length-s.length),h.splice(0,h.length-s.length);for(var u=s.length-1;u>=7;u--)$.push([s[u-(r-1)],i[u-(_-1)],h[u-(l-1)]]);return $}async function gator(n,a=13,e=8,t=5,r=8,_=5,l=3){var $=[],s=await smma(n,a),i=await smma(n,e),h=await smma(n,t);i.splice(0,i.length-s.length),h.splice(0,h.length-s.length);for(var u=s.length-1;u>=r-1;u--)$.push([s[u-(r-1)]-i[u-(_-1)],-Math.abs(i[u-(_-1)]-h[u-(l-1)])]);return $}async function recent_high(n,a=25){for(var e=n.length-2,t=a,r=0,_=n[n.length-1];e>=0&&(n[e]>=_&&t>0?(_=n[e],r=e,t=a):t--,!(t<=0));e--);return{index:r,value:_}}async function recent_low(n,a=25){for(var e=n.length-2,t=a,r=0,_=n[n.length-1];e>=0&&(n[e]<=_&&t>0?(_=n[e],r=e,t=a):t--,!(t<=0));e--);return{index:r,value:_}}async function support(n,a=recent_low(n)){var e,t,r=(a=await a).value;do{for(var _=a.index;_<n.length;_++){var l=(a.value-n[_])/(a.index-_);l<r&&(r=l,e=_)}a.index+1==e&&e!=n.length-1?(a.index=e,r=Math.min.apply(null,n.slice()),a.value=n[a.index],t=!1):t=!0,a.index==n.length-1&&(t=!0)}while(!t);return e==n.length-1||a.index==n.length-1?{calculate:async n=>a.value,slope:0,lowest:a.value,index:a.index}:{calculate:async n=>n*r+a.value,slope:r,lowest:a.value,index:a.index}}async function resistance(n,a){var e,t,r=(a=a||await recent_high(n)).value;do{for(var _=a.index;_<n.length;_++){var l=(n[_]-a.value)/(a.index-_);l<r&&(r=l,e=_)}a.index+1==e&&e!=n.length-1?(a.index=e,r=Math.max.apply(null,n.slice()),a.value=n[a.index],t=!1):t=!0,a.index==n.length-1&&(t=!0)}while(!t);return e==n.length-1||a.index==n.length-1?{calculate:async n=>a.value,slope:0,highest:a.value,index:a.index}:{calculate:async n=>-(n*r)+a.value,slope:r,highest:a.value,index:a.index}}async function fisher(n,a){for(var e=[],t=0,r=0,_=a;_<=n.length;_++){var l=n.slice(_-a,_),$=t,s=Math.min.apply(null,l),r=.66*((n[_-1]-s)/(Math.max.apply(null,l)-s)-.5)+.67*r;r>.99&&(r=.999),r<-.99&&(r=-.999),t=.5*Math.log((1+r)/(1-r))+.5*$,e.push([t,$])}return e.slice(1,e.length)}async function cross(n,a){n.splice(0,n.length-a.length);for(var e=n[0]>a[0],t=[],r=0;r<n.length;r++)n[r]<a[r]&&e&&(t.push({index:r,cross:!1}),e=!1),n[r]>a[r]&&!e&&(t.push({index:r,cross:!0}),e=!0);return t}async function se(n,a){return a=a||n.length,await std(n)/a**.5}async function halftrend(n,a,e,t){for(var r=[],_=[0],l=[0],$=[0],s=[0],i=void 0,h=a;h<=n.length;h++){var u=n.slice(h-a,h);maxlow=u[u.length-2][2],minhigh=u[u.length-2][0];var o=t*(atr2=(atr2=await atr(u,a))[atr2.length-1]/2),p=Math.max.apply(null,u.slice(u.length-1,u.length).map(n=>n[0])),c=Math.min.apply(null,u.slice(u.length-1,u.length).map(n=>n[2])),g=await sma(u.slice(u.length-e,e).map(n=>n[0]),e),v=await sma(u.slice(u.length-e,e).map(n=>n[2]),e);if(1==_[_.length-1]?(maxlow=Math.max(c,maxlow),g[0]<maxlow&&u[u.length-1][1]<u[u.length-2][2]&&(l.push(1),_.push(0),minhigh=u[u.length-2][0])):(minhigh=Math.min(p,minhigh),v[0]>minhigh&&u[u.length-1][1]<u[u.length-2][0]&&(l.push(0),_.push(1),maxlow=c)),0==l[l.length-1]){isNaN(l[l.length-2])||0==l[l.length-2]?$.push(isNaN($[$.length-2])?maxlow:Math.max($[$.length-2],maxlow)):$.push(isNaN(s[s.length-2])?s[s.length-1]:s[s.length-2]),i="long";var f=$[$.length-1]+o,m=$[$.length-1]-o}else{isNaN(l[l.length-2])||1==l[l.length-2]?s.push(isNaN(s[s.length-2])?minhigh:Math.min(minhigh,s[s.length-2])):s.push(isNaN($[$.len-2])?$[$.length-1]:$[$.length-2]),i="short";var f=s[s.length-1]+o,m=s[s.length-1]-o}r.push([f,0==l[l.length-1]?$[$.length-1]:s[s.length-1],m,i])}return r}const sum=async n=>n.reduce((n,a)=>n+a);async function covariance(n,a,e){for(var t=[],r=await sma(n,n.length),_=await sma(a,a.length),l=e;l<=n.length;l++){for(var $=n.slice(l-e,l),s=a.slice(l-e,l),r=await sma($,e),i=[],_=await sma(s,e),h=0;h<e;h++)i.push(($[h]-r[0])*(s[h]-_[0]));i=await sum(i),t.push(i/e)}return t}const range=(n,a,e)=>Math.floor(e?e()*(Math.floor(a)-Math.ceil(n))+Math.ceil(n):Math.random()*(Math.floor(a)-Math.ceil(n))+Math.ceil(n)),pick=(n,a)=>n[Math.floor(a?a()*Math.floor(n.length):Math.random()*Math.floor(n.length))],float=(n,a,e)=>e?e()*(a-n)+n:Math.random()*(a-n)+n;function order(n,a){var e=[];n=n.slice();do{var t=Math.floor(a?a()*Math.floor(n.length):Math.random()*Math.floor(n.length));e.push(n[t]),n.splice(t,1)}while(n.length>0);return e}function prng(n){for(var a=0,e=1779033703^n.length;a<n.length;a++)e=(e=Math.imul(e^n.charCodeAt(a),3432918353))<<13|e>>>19;return e=Math.imul((e=Math.imul(e^e>>>16,2246822507))^e>>>13,3266489909),n=(e^=e>>>16)>>>0,function(){var a=n+=1831565813;return a=Math.imul(a^a>>>15,1|a),(((a^=a+Math.imul(a^a>>>7,61|a))^a>>>14)>>>0)/4294967296}}async function ncdf(n,a,e){var t=1/(1+.2315419*Math.abs(n=a||e?(n-a)/e:n)),r=.3989423*Math.exp(-n*n/2)*t*(.3193815+t*(-.3565638+t*(1.781478+t*(-1.821256+1.330274*t))));return n>0?1-r:r}async function zigzag(n,a=.05){var e=[],t=1/0,r=-1/0,_=!1,l=!1,$=[];if(Array.isArray(n[0]))for(var s=0;s<n.length;s++)if(_){e[e.length-1].value>=n[s][1]&&(e[e.length-1].value=n[s][1],e[e.length-1].index=s),t>=n[s][1]&&(t=n[s][1]);var i=(n[s][0]-t)/t;i>a&&(e.push({index:s,value:n[s][0]}),l=!0,_=!1,t=1/0)}else if(l){e[e.length-1].value<=n[s][0]&&(e[e.length-1].value=n[s][0],e[e.length-1].index=s),r<=n[s][1]&&(r=n[s][1]);var h=(r-n[s][1])/n[s][1];h>a&&(e.push({index:s,value:n[s][1]}),_=!0,l=!1,r=-1/0)}else{t>=n[s][1]&&(t=n[s][1]),r<=n[s][0]&&(r=n[s][0]);var i=(n[s][0]-t)/t,h=(r-n[s][1])/r;h>a&&i<a?(_=!0,e.push({index:0,value:n[0][0]}),e.push({index:s,value:n[s][1]})):i>a&&h<a?(l=!0,e.push({index:0,value:n[0][1]}),e.push({index:s,value:n[s][0]})):h>i?(_=!0,e.push({index:0,value:n[0][0]}),e.push({index:s,value:n[s][1]})):(l=!0,e.push({index:0,value:n[0][1]}),e.push({index:s,value:n[s][0]}))}else for(var s=0;s<n.length;s++)if(_){e[e.length-1].value>=n[s]&&(e[e.length-1].value=n[s],e[e.length-1].index=s),t>=n[s]&&(t=n[s]);var i=(n[s]-t)/t;i>a&&(e.push({index:s,value:n[s]}),l=!0,_=!1,t=1/0)}else if(l){e[e.length-1].value<=n[s]&&(e[e.length-1].value=n[s],e[e.length-1].index=s),r<=n[s]&&(r=n[s]);var h=(r-n[s])/n[s];h>a&&(e.push({index:s,value:n[s]}),_=!0,l=!1,r=-1/0)}else{t>=n[s]&&(t=n[s]),r<=n[s]&&(r=n[s]);var i=(n[s]-t)/t,h=(r-n[s])/r;h>a&&i<a?(_=!0,e.push({index:0,value:n[0]}),e.push({index:s,value:n[s]})):i>a&&h<a?(l=!0,e.push({index:0,value:n[0]}),e.push({index:s,value:n[s]})):h>i?(_=!0,e.push({index:0,value:n[0]}),e.push({index:s,value:n[s]})):(l=!0,e.push({index:0,value:n[0]}),e.push({index:s,value:n[s]}))}$=[e[0].value];for(var s=1;s<e.length;s++)for(var u=e[s].index-e[s-1].index,o=(e[s].value-e[s-1].value)/u,p=1;p<=u;p++)$.push(p*o+e[s-1].value);return $}async function psar(n,a=.02,e=.2){for(var t=n[0],r=!0,_=a,l=n[0],$=n[0][1],s=n[0][0],i=[$],h=1;h<n.length;h++)$+=_*(s-$),r?($=Math.min($,t[1],l[1]),n[h][0]>s&&(s=n[h][0],_=Math.min(_+a,e))):($=Math.max($,t[0],l[0]),n[h][1]<s&&(s=n[h][0],_=Math.min(_+a,e))),(r&&n[h][1]<$||!r&&n[h][0]>$)&&(_=a,$=s,s=(r=!r)?n[h][0]:n[h][1]),t=l,l=n[h],i.push($);return i}async function fibbands(n,a=20,e=3){for(var t=0,r=[],_=[],l=await vwma(n,a);t<n.length;t++)if(r.push(n[t][0]),r.length>=a){var $=await std(r,a);_.push($*e),r.splice(0,1)}for(var t=0,s=[];t<l.length;t++){var i=l[t]+.236*_[t],h=l[t]+.382*_[t],u=l[t]+.5*_[t],o=l[t]+.618*_[t],p=l[t]+.764*_[t],c=l[t]+_[t],g=l[t]-.236*_[t],v=l[t]-.382*_[t],f=l[t]-.5*_[t],m=l[t]-.618*_[t],x=l[t]-.764*_[t],w=l[t]-_[t];s.push([c,p,o,u,h,i,l[t],g,v,f,m,x,w])}return s}async function supertrend(n,a=20,e=3){for(var t=a-1,r=await atr(n,a),_=[];t<n.length;t++)_.push([(n[t][0]+n[t][2])/2+e*r[t],(n[t][0]+n[t][2])/2-e*r[t]]);return _}async function cwma(n,a){for(var e=a.length,t=[];e<=n.length;e++){for(var r=n.slice(e-a.length,e),_=0,l=0,$=0;$<a.length;$++)_+=r[$]*a[$],l+=a[$];t.push(_/l)}return t}const fibnumbers=[0,1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,1597,2584,4181],permutations=async n=>n.reduce((n,a)=>n*a);async function mse(n,a){for(var e=0,t=0;e<n.length;e++)t+=Math.pow(a[e]-n[e],2);return t/n.length}async function cum(n,a){for(var e=a,t=[];e<=n.length;e++)t.push(await sum(n.slice(e-a,e)));return t}async function vwwma(n,a=20){n=n.map(n=>[n[0]*n[1],n[1]]);for(var e=1,t=0;e<=a;e++)t+=e;for(var e=a,r=[];e<=n.length;e++){var _=n.slice(e-a,e),l=0,$=0;for(var s in _)l+=_[s][1]*(Number(s)+1)/t,$+=_[s][0]*(Number(s)+1)/t;r.push($/l)}return r}async function elderray(n,a=13){for(var e=a,t=[];e<=n.length;e++){var r=n.slice(e-a,e),_=Math.min.apply(void 0,r),l=Math.max.apply(void 0,r),$=await ema(r,r.length);t.push([l-$[0],_-$[0]])}return t}async function hv(n,a=10){for(var e=a,t=[];e<=n.length;e++){var r=await ssd(n.slice(e-a,e))/a;t.push(Math.sqrt(r))}return t}const t_table=[{value:.5,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},{value:.25,1:1,2:.816,3:.765,4:.741,5:.727,6:.718,7:.711,8:.706,9:.703,10:.7,11:.697,12:.695,13:.694,14:.692,15:.691,16:.69,17:.689,18:.688,19:.688,20:.687,21:.686,22:.686,23:.685,24:.685,25:.684},{value:.2,1:1.376,2:1.061,3:.978,4:.941,5:.92,6:.906,7:.896,8:.889,9:.883,10:.879,11:.876,12:.873,13:.87,14:.868,15:.866,16:.865,17:.863,18:.862,19:.861,20:.86,21:.859,22:.858,23:.858,24:.857,25:.856},{value:.15,1:1.963,2:1.386,3:1.25,4:1.19,5:1.156,6:1.134,7:1.119,8:1.108,9:1.1,10:1.093,11:1.088,12:1.088,13:1.079,14:1.076,15:1.074,16:1.071,17:1.069,18:1.067,19:1.066,20:1.064,21:1.063,22:1.061,23:1.06,24:1.059,25:1.058},{value:.1,1:3.078,2:1.886,3:1.638,4:1.533,5:1.476,6:1.44,7:1.415,8:1.397,9:1.383,10:1.372,11:1.363,12:1.356,13:1.35,14:1.345,15:1.341,16:1.337,17:1.333,18:1.33,19:1.328,20:1.325,21:1.323,22:1.321,23:1.319,24:1.318,25:1.316},{value:.05,1:6.314,2:2.92,3:2.353,4:2.132,5:2.015,6:1.943,7:1.895,8:1.86,9:1.833,10:1.812,11:1.796,12:1.782,13:1.771,14:1.761,15:1.753,16:1.746,17:1.74,18:1.734,19:1.729,20:1.725,21:1.721,22:1.717,23:1.714,24:1.711,25:1.708},{value:.025,1:12.71,2:4.303,3:3.182,4:2.776,5:2.571,6:2.447,7:2.365,8:2.306,9:2.262,10:2.228,11:2.201,12:2.179,13:2.16,14:2.145,15:2.131,16:2.12,17:2.11,18:2.101,19:2.093,20:2.086,21:2.08,22:2.074,23:2.069,24:2.064,25:2.06},{value:.01,1:31.82,2:6.965,3:4.541,4:3.747,5:3.365,6:3.143,7:2.998,8:2.896,9:2.821,10:2.764,11:2.718,12:2.681,13:2.65,14:2.624,15:2.602,16:2.583,17:2.567,18:2.552,19:2.539,20:2.528,21:2.518,22:2.508,23:2.5,24:2.492,25:2.485},{value:.005,1:63.66,2:9.925,3:5.841,4:4.604,5:4.032,6:3.707,7:3.499,8:3.355,9:3.25,10:3.169,11:3.106,12:3.055,13:3.012,14:2.977,15:2.947,16:2.921,17:2.898,18:2.878,19:2.861,20:2.845,21:2.831,22:2.819,23:2.807,24:2.797,25:2.787},{value:.001,1:318.13,2:22.327,3:10.215,4:7.173,5:5.893,6:5.208,7:4.785,8:4.501,9:4.297,10:4.144,11:4.025,12:3.93,13:3.852,14:3.787,15:3.733,16:3.686,17:3.646,18:3.61,19:3.579,20:3.552,21:3.527,22:3.505,23:3.485,24:3.467,25:3.45},{value:5e-4,1:636.62,2:31.599,3:12.924,4:8.61,5:6.869,6:5.959,7:5.408,8:5.041,9:4.781,10:4.587,11:4.437,12:4.318,13:4.221,14:4.14,15:4.073,16:4.015,17:3.965,18:3.922,19:3.883,20:3.85,21:3.819,22:3.792,23:3.768,24:3.745,25:3.725}];async function pvalue(n,a){if(a>25)throw Error("ta.js | pvalue | df too high!");if(a<1)throw Error("ta.js | pvalue | df too low!");for(var e=0;e<t_table.length-1;e++)if(n>=t_table[e][Number(a).toString()]&&n<=t_table[Number(e)+1][Number(a).toString()])return t_table[e+1].value+(t_table[Number(e)+1].value-t_table[e].value)*(t_table[e+1][Number(a).toString()]-n)/(t_table[e][Number(a).toString()]-t_table[e+1][Number(a).toString()]);return 1e-4}async function rvi(n,a=20){for(var e=3,t=[],r=[],_=[];e<n.length;e++)if(t.push((n[e][3]-n[e][0]+2*(n[e][3]-n[e-1][0])+2*(n[e][3]-n[e-2][0])+(n[e][3]-n[e-3][0]))/6),r.push((n[e][1]-n[e][2]+2*(n[e][1]-n[e-1][2])+2*(n[e][1]-n[e-2][2])+(n[e][1]-n[e-3][2]))/6),t.length>=a){var l=await sma(t,a),$=await sma(r,a);_.push(l[0]/$[0]),t.splice(0,1),r.splice(0,1)}return _}async function rvi_signal(n){for(var a=3,e=[];a<n.length;a++)e.push((n[a]+2*n[a-1]+2*n[a-2]+n[a-3])/6);return e}async function rsi_divergence(n,a,e){e||(e=wrsi);var t=await e(n,a),r=[];n=await mom(n.slice(a-1,n.length),2);for(var _=0;_<n.length;_++)n[_]>0&&t[_]<0||n[_]<0&&t[_]>0?r.push(1):r.push(0);return r}async function divergence(n,a){n.length>a.length&&n.splice(0,n.length-a.length),a.length>n.length&&a.splice(0,a.length-n.length);for(var e=1,t=[];e<n.length;e++)n[e]>n[e-1]&&a[e]<a[e-1]||n[e]<n[e-1]&&a[e]>a[e-1]?t.push(1):t.push(0);return t}async function times_up(n,a){for(var e=[],t=a;t<n.length;t++){for(var r=1,_=t-a+1;_<t;_++)if(n[t-1]>n[t]){r=0;break}e.push(r)}return e}async function times_down(n,a){for(var e=[],t=a;t<n.length;t++){for(var r=1,_=t-a+1;_<t;_++)if(n[t-1]<n[t]){r=0;break}e.push(r)}return e}const random={range,pick,float,order,prng};const aroon={up:aroon_up,down:aroon_down,osc:aroon_osc};
