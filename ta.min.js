/* ta.js (c) Nino Kroesen. MIT License. */ async function median(n,a){for(var e=[],t=a||n.length;t<=n.length;t++){var r=n.slice(t-a,t);r.sort((n,a)=>n-a),e.push(r[Math.round(r.length/2)-1])}return e}async function kmeans(n,a){var e,t=[],r=[],l=[],s=!1,o=Math.round(n.length/(a+1));for(i=0;i<a;i++)r[i]=n[o*(i+1)];do{for(i=0;i<a;i++)t[i]=[];for(x=0;x<n.length;x++){var h=-1;for(y=0;y<a;y++){var u=Math.abs(r[y]-n[x]);-1===h?(h=u,e=y):u<=h&&(h=u,e=y)}t[e].push(n[x])}for(l=r,x=0;x<a;x++){var c=0;for(y=0;y<t[x].length;y++)c+=t[x][y];var p=c/t[e].length;r[x]=p}for(x=0;x<a;x++)r[x]!==l[x]&&(s=!0)}while(s);return t}async function normalize(n,a){a=a||0;for(var e=await Math.max.apply(null,n.slice())*(1+a),t=await Math.min.apply(null,n.slice())*(1-a),r=[],l=0;l<n.length;l++)r.push(1-(e-n[l])/(e-t));return r}async function denormalize(n,a,e){e=e||0;for(var t=await Math.max.apply(null,n.slice())*(1+e),r=await Math.min.apply(null,n.slice())*(1-e),l=[],s=0;s<a.length;s++)l.push(r+a[s]*(t-r));return l}async function standardize(n){for(var a=await sma(n,n.length),e=await std(n),t=[],r=0;r<n.length;r++)t.push((n[r]-a[0])/e);return t}async function mad(n,a){for(var e=a||n.length,t=[],r=e;r<=n.length;r++){var l=n.slice(r-e,r),s=await median(l),o=l.map(n=>Math.abs(n-s[s.length-1]));o=await median(o),t.push(o[o.length-1])}return t}async function aad(n,a){for(var e=a||n.length,t=[],r=e;r<=n.length;r++){var l=n.slice(r-e,r),s=0,o=await sma(l,e);for(q in l)s+=Math.abs(l[q]-o[o.length-1]);t.push(s/e)}return t}async function ssd(n,a){for(var e=a||n.length,t=[],r=e;r<=n.length;r++){var l=n.slice(r-e,r),s=await sma(l,e),o=0;for(let n in l)o+=(l[n]-s[s.length-1])**2;t.push(Math.sqrt(o))}return t}async function er(n){var a=[],e=[],t=1,r=1;for(let t in n)n[t]>=0?a.push(1+n[t]):e.push(1+n[t]);var l=a.length/n.length,s=e.length/n.length;for(let n in e)r*=e[n];for(let n in a)t*=a[n];return(100*(t**(1/a.length)-1)*l+100*(r**(1/e.length)-1)*s)/100}async function winratio(n){var a=0,e=0;for(let t in n)n[t]>=0?a++:e++;return a/(e+a)}async function avgwin(n){for(var a=[],e=0;e<n.length;e++)n[e]>=0&&a.push(n[e]);return(await sma(a,a.length))[0]}async function avgloss(n){for(var a=[],e=0;e<n.length;e++)n[e]<0&&a.push(n[e]);return(await sma(a,a.length))[0]}async function rsi(n,a){for(var e=a||14,t=[],r=n.slice(0,e),l=e,s=0,o=0;l<n.length;l++,s=0,o=0){r.push(n[l]);for(var h=1;h<r.length;h++)r[h]-r[h-1]<0?o+=Math.abs(r[h]-r[h-1]):s+=r[h]-r[h-1];var u=100-100/(1+s/e/(o/e));t.push(u),r.splice(0,1)}return t}async function wrsi(n,a){for(var e=a||14,t=[],r=[],l=[],s=1;s<n.length;s++)n[s]-n[s-1]<0?(l.push(Math.abs(n[s]-n[s-1])),r.push(0)):(l.push(0),r.push(n[s]-n[s-1]));l=await wsma(l,e),r=await wsma(r,e);for(let n in l)t.push(100-100/(1+r[n]/l[n]));return t}async function tsi(n,a,e,t){for(var r=a||25,l=e||13,s=t||13,o=[],h=[],u=[],i=[],c=1;c<n.length;c++)o.push(n[c]-n[c-1]),h.push(Math.abs(n[c]-n[c-1]));var p=await ema(o,r),f=await ema(h,r),g=await ema(p,l),m=await ema(f,l);for(c=0;c<g.length;c++)u.push(g[c]/m[c]);var v=await ema(u,s);u.splice(0,u.length-v.length);for(c=0;c<v.length;c++)i.push([v[c],u[c]]);return i}async function bop(n,a){var e=n.map(n=>(n[3]-n[0])/(n[1]-n[2]));a=a||14;return e=await sma(e,a)}async function fi(n,a){for(var e=a||13,t=[],r=[],l=1;l<n.length;l++)if(t.push((n[l][0]-n[l-1][0])*n[l][1]),t.length>=e){var s=await ema(t,e);r.push(s[s.length-1]),t.splice(0,1)}return r}async function asi(n){for(var a=[],e=1;e<n.length;e++){var t,r=n[e][1],l=n[e-1][1],s=n[e][0],o=n[e-1][0],h=n[e][2],u=n[e-1][2],i=o-r>u-r?o-r:u-r,c=n[e][0],p=n[e-1][0],f=Math.max(n[e][0],n[e-1][0])-Math.min(n[e][2],n[e-1][2]);s-l>h-l&&s-l>s-h&&(t=s-l-(h-l)/2+(l-p)/4),h-l>s-l&&h-l>s-h&&(t=h-l-(s-l)/2+(l-p)/4),s-h>s-l&&s-h>h-l&&(t=s-h+(l-p)/4),a.push((l-r+(l-p)/2+(r-c)/2)/t*50*i/f)}return a}async function ao(n,a,e){var t=a||5,r=e||35,l=[];n=n.map(n=>(n[0]+n[1])/2);for(var s=r;s<=n.length;s++){var o=n.slice(s-r,s),h=await sma(o,t),u=await sma(o,r);l.push(h[h.length-1]-u[u.length-1])}return l}async function ac(n,a,e){a=a||5,e=e||35;var t=await ao(n,a,e),r=await sma(t,a),l=[];t.length>r.length?t.splice(0,t.length-r.length):r.splice(0,r.length-t.length);for(let n in t)l.push(t[n]-r[n]);return l}async function fib(n,a){return[n,.236*(a-n)+n,.382*(a-n)+n,.5*(a-n)+n,.618*(a-n)+n,.786*(a-n)+n,a,1.618*(a-n)+n,2.618*(a-n)+n,3.618*(a-n)+n,4.236*(a-n)+n]}async function pr(n,a){for(var e=a||14,t=[],r=e;r<=n.length;r++){var l=n.slice(r-e,r),s=await Math.max.apply(null,l),o=await Math.min.apply(null,l);t.push((s-n[r-1])/(s-o)*-100)}return t}async function lsma(n,a){for(var e=a||25,t=[],r=e;r<=n.length;r++){for(var l,s,o=n.slice(r-e,r),h=0,u=0,i=0,c=0,p=1;p<=e;p++)h+=p,u+=o[p-1],i+=o[p-1]*p,c+=p*p,o[p-1]*o[p-1];s=u/e-(l=(i-h*u/e)/(c-h*h/e))*h/e,t.push(l*e+s)}return t}async function don(n,a){for(var e=[],t=a||20,r=t;r<=n.length;r++){var l=n.slice(r-t,r),s=[],o=[];for(let n in l)s.push(l[n][0]),o.push(l[n][1]);var h=Math.max.apply(null,s.slice()),u=Math.min.apply(null,o.slice());e.push([h,(h+u)/2,u])}return e}async function ichimoku(n,a,e,t,r){for(var l=[],s=a||9,o=e||26,h=t||52,u=r||26,i=[],c=[],p=0;p<n.length;p++)if(l.push(n[p]),l.length>=h){var f=[],g=[];for(let n in l)f.push(l[n][0]),g.push(l[n][2]);var m=(Math.max.apply(null,f.slice(f.length-s,f.length))+Math.min.apply(null,g.slice(g.length-s,g.length)))/2,v=(Math.max.apply(null,f.slice(f.length-o,f.length))+Math.min.apply(null,g.slice(g.length-o,g.length)))/2,d=n[p][1]+v,x=(Math.max.apply(null,f.slice(f.length-h,f.length))+Math.min.apply(null,g.slice(g.length-o,g.length)))/2;chik=n[p][1],c.push([m,v,d,x,chik]),l.splice(0,1)}for(p=u;p<c.length-u;p++)i.push([c[p][0],c[p][1],c[p+u][2],c[p+u][3],c[p-u][4]]);return i}async function stoch(n,a,e,t){var r=a||14,l=e||3,s=t||3,o=[],h=[],u=[],i=[];r<l&&([r,l]=[l,r]),s>l&&([s,l]=[l,s]);for(var c=0;c<n.length;c++){if(h.push(n[c][0]),u.push(n[c][2]),h.length>=r){var p=await Math.max.apply(null,h),f=await Math.min.apply(null,u),g=100*(n[c][1]-f)/(p-f);i.push(g)}if(s>0&&i.length>s){var m=await sma(i,s);i.push(m[m.length-1])}if(i.length-s>=l){var v=await sma(i,l);o.push([g,v[v.length-1]]),h.splice(0,1),u.splice(0,1),i.splice(0,1)}}return o}async function atr(n,a){for(var e=a||14,t=[n[0][0]-n[0][2]],r=1;r<n.length;r++){var l=await Math.max(n[r][0]-n[r-1][1],n[r][2]-n[r-1][1],n[r][0]-n[r][2]);t.push((t[t.length-1]*(e-1)+l)/e)}return t}async function sma(n,a){for(var e=a||14,t=[],r=e,l=0;r<=n.length;r++,l=0){var s=n.slice(r-e,r);for(q in s)l+=s[q];t.push(l/e)}return t}async function smma(n,a){for(var e=a||14,t=[],r=e;r<=n.length;r++){var l=n.slice(r-e,r),s=0;for(q in l)s+=l[q];t.length<=0?t.push(s/e):t.push((s-t[t.length-1])/e)}return t.splice(0,1),t}async function wma(n,a){for(var e=a||14,t=0,r=[],l=1;l<=e;l++)t+=l;for(l=e;l<=n.length;l++){var s=n.slice(l-e,l),o=0;for(q in s)o+=s[q]*(Number(q)+1)/t;r.push(o)}return r}async function wsma(n,a){for(var e=a||14,t=[],r=1/e,l=e;l<=n.length;l++)if(t.length>0)t.push((n[l-1]-t[t.length-1])*r+t[t.length-1]);else{var s=n.slice(l-e,l),o=0;for(q in s)o+=s[q];t.push(o/e)}return t}async function pwma(n,a){for(var e=0,t=[],r=[],l=a||14,s=l/2,o=a;s>=1;s--,o--)s%1!=0?e+=(s=Math.round(s))*o:(r.push(s*o),e+=s*o*2),r.unshift(s*o);for(s=l;s<=n.length;s++){for(var h=0,u=n.slice(s-l,s),i=l-1;i>=0;i--)h+=u[i]*r[i]/e;t.push(h)}return t}async function hwma(n,a){for(var e=0,t=[],r=[],l=a||14,s=1,o=l;s<=l/2;s++,o--)s%1!=0?e+=(s=Math.round(s))*o:(r.push(s*o),e+=s*o*2),r.unshift(s*o);for(s=l;s<=n.length;s++){for(var h=0,u=n.slice(s-l,s),i=l-1;i>=0;i--)h+=u[i]*r[i]/e;t.push(h)}return t}async function vwma(n,a){for(var e=a||20,t=[],r=(n=n.map(n=>[n[0]*n[1],n[1]]),e);r<=n.length;r++){for(var l=n.slice(r-e,r),s=0,o=0,h=0;h<l.length;h++)s+=l[h][1],o+=l[h][0];t.push(o/s)}return t}async function ema(n,a){for(var e=a||12,t=[],r=2/(e+1),l=e;l<=n.length;l++)if(t.length>0)t.push((n[l-1]-t[t.length-1])*r+t[t.length-1]);else{var s=n.slice(l-e,l),o=0;for(q in s)o+=s[q];t.push(o/e)}return t}async function hull(n,a){var e=a||14,t=[],r=[],l=await wma(n,e),s=Math.round(Math.sqrt(e)),o=await wma(n,Math.round(e/2));o.splice(0,o.length-l.length);for(let n in l)if(t.push(2*o[n]-l[n]),t.length>=s){var h=await wma(t,s);r.push(h[0]),t.splice(0,1)}return r}async function kama(n,a,e,t){a=a||10,e=e||2,t=t||30;for(var r=[(r=await sma(n,a))[r.length-1]],l=a+1;l<n.length;l++){for(var s=0,o=Math.abs(n[l]-n[l-a]),h=1;h<a;h++)s+=Math.abs(n[l-h]-n[l-h-1]);var u=(o/s*(2/(e+1)-2/(t+1)+2/(t+1)))**2;r.push(r[r.length-1]+u*(n[l]-r[r.length-1]))}return r}async function macd(n,a,e){var t=a||12,r=e||26;t>r&&([t,r]=[r,t]);var l=await ema(n,t),s=await ema(n,r),o=[];l.splice(0,r-t);for(var h=0;h<s.length;h++)o.push(l[h]-s[h]);return o}async function bands(n,a,e){for(var t=a||14,r=e||1,l=[],s=[],o=[],h=await sma(n,t),u=0;u<n.length;u++)if(l.push(n[u]),l.length>=t){var i=await std(l,t);s.push(i),l.splice(0,1)}for(u=0;u<h.length;u++)o.push([h[u]+s[u]*r,h[u],h[u]-s[u]*r]);return o}async function bandwidth(n,a,e){for(var t=a||14,r=e||1,l=[],s=await bands(n,t,r),o=0;o<s.length;o++)l.push((s[o][0]-s[o][2])/s[o][1]);return l}async function keltner(n,a,e){var t,r=a||14,l=e||1,s=[],o=await atr(n,r),h=[];for(var u in n)s.push((n[u][0]+n[u][1]+n[u][2])/3);t=await sma(s,r),o.splice(0,r-1);for(u=0;u<t.length;u++)h.push([t[u]+o[u]*l,t[u],t[u]-o[u]*l]);return h}async function variance(n,a){for(var e=a||n.length,t=[],r=e;r<=n.length;r++){var l=n.slice(r-e,r),s=await sma(l,e),o=0;for(x in l)o+=(l[x]-s[s.length-1])**2;t.push(o/e)}return t}async function std(n,a){var e=a||n.length,t=n.reduce((n,a)=>Number(n)+Number(a))/e;return Math.sqrt(n.reduce((n,a)=>n+Math.pow(a-t,2),0)/e)}async function normsinv(n){var a=-.00778489400243029,e=-.322396458041136,t=-2.40075827716184,r=-2.54973253934373,l=4.37466414146497,s=2.93816398269878,o=.00778469570904146,h=.32246712907004,u=2.445134137143,i=3.75440866190742;if(n<0||n>1)return 0;if(n<.02425)return(((((a*(c=Math.sqrt(-2*Math.log(n)))+e)*c+t)*c+r)*c+l)*c+s)/((((o*c+h)*c+u)*c+i)*c+1);if(n<=.97575){var c,p=(c=n-.5)*c;return(((((-39.6968302866538*p+220.946098424521)*p-275.928510446969)*p+138.357751867269)*p-30.6647980661472)*p+2.50662827745924)*c/(((((-54.4760987982241*p+161.585836858041)*p-155.698979859887)*p+66.8013118877197)*p-13.2806815528857)*p+1)}return-(((((a*(c=Math.sqrt(-2*Math.log(1-n)))+e)*c+t)*c+r)*c+l)*c+s)/((((o*c+h)*c+u)*c+i)*c+1)}async function sim(n,a,e,t){for(var r=[],l=(a=a||50,e=e||1e3,0);l<e;l++){for(var s=n.slice(),o=0;o<a;o++){for(var h=[],u=1;u<s.length;u++){var i=await dif(s[u],s[u-1]);h.push(i)}var c=await sma(h,h.length),p=await std(h),f=await normsinv(Math.random());s.push(s[s.length-1]*Math.exp(c[0]-p*p/2+p*f))}r.push(s)}return t?await percentile(r,t):r}async function percentile(n,a){for(var e=[],t=0;t<n[0].length;t++)n.sort((n,a)=>n[t]-a[t]),e.push(n[Math.round((n.length-1)*a)][t]);return e}async function cor(n,a){for(var e=await sma(n,n.length),t=await sma(a,a.length),r=0,l=0,s=0,o=0;o<n.length;o++){var h=n[o]-e,u=a[o]-t;r+=h*u,l+=Math.pow(h,2),s+=Math.pow(u,2)}var i=n.length-1;return l/=i,s/=i,r/(i*(l=Math.sqrt(l))*(s=Math.sqrt(s)))}async function dif(n,a){return(n-a)/a}async function drawdown(n){for(var a=n[0],e=n[0],t=0,r=1;r<n.length;r++){if(n[r]>a){if(0!=e)(l=await dif(e,a))<t&&(t=l),e=n[r];a=n[r]}n[r]<e&&(e=n[r])}var l;return(l=await dif(e,a))<t&&(t=l),t}async function aroon_up(n,a){for(var e=a||10,t=[],r=e;r<=n.length;r++){var l=n.slice(r-e,r),s=l.slice();s.sort((n,a)=>n-a),t.push(100*(e-1-l.reverse().findIndex(n=>n===s[e-1]))/(e-1))}return t}async function aroon_down(n,a){for(var e=a||10,t=[],r=e;r<=n.length;r++){var l=n.slice(r-e,r),s=l.slice();s.sort((n,a)=>n-a),t.push(100*(e-1-l.reverse().findIndex(n=>n===s[0]))/(e-1))}return t}async function aroon_osc(n,a){for(var e=a||25,t=[],r=await aroon.up(n,e),l=await aroon.down(n,e),s=0;s<r.length;s++)t.push(r[s]-l[s]);return t}async function mfi(n,a){for(var e=a||14,t=[],r=n.map(n=>n[1]),l=n.map(n=>n[0]),s=e;s<=n.length;s++){var o=0,h=0;for(q=s-e;q<s;q++)o+=l[q],h+=r[q];t.push(100-100/(1+o/h))}return t}async function roc(n,a){for(var e=a||14,t=[],r=e;r<=n.length;r++)t.push((n[r-1]-n[r-e])/n[r-e]);return t}async function cop(n,a,e,t){a=a||11,e=e||14,t=t||10,max=Math.max(a,e),co=[];for(var r=max+t;r<n.length;r++){var l=n.slice(r-(max+t),r),s=l.slice(),o=[];l=await roc(l,a),s=await roc(s,e),l.splice(0,l.length-s.length),s.splice(0,s.length-l.length);for(var h=0;h<l.length;h++)o.push(l[h]+s[h]);o=await wma(o,t),co.push(o[o.length-1])}return co}async function kst(n,a,e,t,r,l,s,o,h,u){a=a||10,e=e||15,t=t||20,r=r||30,l=l||10,s=s||10,o=o||10,h=h||15,u=u||9;for(var i=[],c=[],p=Math.max(a,e,t,r)+Math.max(l,s,o,h),f=p;f<=n.length;f++){var g=n.slice(f-p,f),m=await roc(g,a),v=await roc(g,e),d=await roc(g,t),x=await roc(g,r);m=await sma(m,l),v=await sma(v,s),d=await sma(d,o),x=await sma(x,h),i.push(m[m.length-1]+v[v.length-1]+d[d.length-1]+x[x.length-1])}var w=await sma(i,u);for(var f in i.splice(0,i.length-w.length),w)c.push([i[f],w[f]]);return c}async function obv(n){for(var a=[0],e=1;e<n.length;e++)n[e][1]>n[e-1][1]&&a.push(a[a.length-1]+n[e][0]),n[e][1]<n[e-1][1]&&a.push(a[a.length-1]-n[e][0]),n[e][1]===n[e-1][1]&&a.push(a[a.length-1]);return a}async function vwap(n,a){for(var e=!a||a>n.length?n.length:a,t=(n=n.map(n=>[n[0]*n[1],n[1]]),[]),r=e;r<=n.length;r++){for(var l=n.slice(r-e,r),s=0,o=0,h=0;h<l.length;h++)s+=l[h][1],o+=l[h][0];t.push(o/s)}return t}async function mom(n,a,e){for(var t=a||10,r=[],l=t-1;l<n.length;l++)e?r.push(n[l]/n[l-(t-1)]*100):r.push(n[l]-n[l-(t-1)]);return r}async function mom_osc(n,a){for(var e=a?a+1:10,t=[],r=e;r<=n.length;r++){for(var l=0,s=0,o=1;o<e;o++)n[r-e+(o-1)]<n[r-e+o]?l+=n[r-e+o]:s+=n[r-e+o];t.push((l-s)/(l+s)*100)}return t}async function ha(n){for(var a=[[(Number(n[0][0])+Number(n[0][3]))/2,Number(n[0][1]),Number(n[0][2]),(Number(n[0][0])+Number(n[0][1])+Number(n[0][2])+Number(n[0][3]))/4]],e=1;e<n.length;e++)a.push([(a[a.length-1][0]+a[a.length-1][3])/2,Math.max(a[a.length-1][0],a[a.length-1][3],n[e][1]),Math.min(a[a.length-1][0],a[a.length-1][3],n[e][2]),(n[e][0]+n[e][1]+n[e][2]+n[e][3])/4]);return a}async function ren(n,a){for(var e=[],t=(a=a||1,Math.floor(a)===a?0:a.toString().split(".")[1].length||0),r=Math.ceil(n[0][0]/a*10**t)/10**t*a,l=r-a,s=1;s<n.length;s++){if(n[s][0]>r+a)do{e.push([r,r+a,r,r+a]),r+=a,l+=a}while(n[s][0]>r+a);if(n[s][1]<l-a)do{e.push([l,l,l-a,l-a]),r-=a,l-=a}while(n[s][1]<l-a)}return e}async function envelope(n,a,e){e=e||.005;for(var t=[],r=a=a||10;r<n.length;r++){var l=await sma(n.slice(r-a,r),a);t.push([l[0]*(1+e),l[0],l[0]*(1-e)])}return t}async function chaikin_osc(n,a,e){a=a||3,e=e||10;for(var t=[],r=[],l=0;l<n.length;l++){var s=(n[l][1]-n[l][2]-(n[l][0]-n[l][1]))/(n[l][0]-n[l][2]);isNaN(s)?r.push(0):r.push(s*n[l][3])}var o=await ema(r,a),h=await ema(r,e);o.length>h.length?o.splice(0,o.length-h.length):h.splice(0,h.length-o.length);for(l=0;l<o.length;l++)t.push(o[l]-h[l]);return t}async function fractals(n){for(var a=[[!1,!1],[!1,!1]],e=2;e<n.length-2;e++){var t=n[e-2][0]<n[e][0]&&n[e-1][0]<n[e][0]&&n[e][0]>n[e+1][0]&&n[e][0]>n[e+2][0],r=n[e-2][1]>n[e][1]&&n[e-1][1]>n[e][1]&&n[e][1]<n[e+1][1]&&n[e][1]<n[e+2][1];a.push([t,r])}return a.push([!1,!1],[!1,!1]),a}async function alligator(n,a,e,t,r,l,s){a=a||13,e=e||8,t=t||5,r=r||8,l=l||5,s=s||3;var o=[],h=await smma(n,a),u=await smma(n,e),i=await smma(n,t);u.splice(0,u.length-h.length),i.splice(0,i.length-h.length);for(var c=h.length-1;c>=7;c--)o.push([h[c-(r-1)],u[c-(l-1)],i[c-(s-1)]]);return o}async function gator(n,a,e,t,r,l,s){a=a||13,e=e||8,t=t||5,r=r||8,l=l||5,s=s||3;var o=[],h=await smma(n,a),u=await smma(n,e),i=await smma(n,t);u.splice(0,u.length-h.length),i.splice(0,i.length-h.length);for(var c=h.length-1;c>=r-1;c--)o.push([h[c-(r-1)]-u[c-(l-1)],-Math.abs(u[c-(l-1)]-i[c-(s-1)])]);return o}async function recent_high(n,a){for(var e=a=a||25,t=0,r=n[n.length-1],l=n.length-2;l>=0&&(n[l]>=r&&e>0?(r=n[l],t=l,e=a):e--,!(e<=0));l--);return{index:t,value:r}}async function recent_low(n,a){for(var e=a=a||25,t=0,r=n[n.length-1],l=n.length-2;l>=0&&(n[l]<=r&&e>0?(r=n[l],t=l,e=a):e--,!(e<=0));l--);return{index:t,value:r}}async function support(n,a){var e,t,r=(a=a||await recent_low(n)).value;do{for(var l=a.index;l<n.length;l++){var s=(a.value-n[l])/(a.index-l);s<r&&(r=s,e=l)}a.index+1==e&&e!=n.length-1?(a.index=e,r=Math.min.apply(null,n.slice()),a.value=n[a.index],t=!1):t=!0,a.index==n.length-1&&(t=!0)}while(!t);return e==n.length-1||a.index==n.length-1?{calculate:async n=>a.value,slope:0,lowest:a.value,index:a.index}:{calculate:async n=>n*r+a.value,slope:r,lowest:a.value,index:a.index}}async function resistance(n,a){var e,t,r=(a=a||await recent_high(n)).value;do{for(var l=a.index;l<n.length;l++){var s=(n[l]-a.value)/(a.index-l);s<r&&(r=s,e=l)}a.index+1==e&&e!=n.length-1?(a.index=e,r=Math.max.apply(null,n.slice()),a.value=n[a.index],t=!1):t=!0,a.index==n.length-1&&(t=!0)}while(!t);return e==n.length-1||a.index==n.length-1?{calculate:async n=>a.value,slope:0,highest:a.value,index:a.index}:{calculate:async n=>n*-r+a.value,slope:r,highest:a.value,index:a.index}}async function fisher(n,a){var e=[],t=0,r=0;for(let h=a;h<n.length;h++){var l=n.slice(h-a,h),s=t,o=Math.min.apply(null,l);(r=.66*((n[h]-o)/(Math.max.apply(null,l)-o)-.5)+.67*r)>.99&&(r=.999),r<-.99&&(r=-.999),t=.5*Math.log((1+r)/(1-r))+.5*s,e.push([t,s])}return e.slice(1,e.length)}async function cross(n,a){n.splice(0,n.length-a.length);for(var e=n[0]>a[0],t=[],r=0;r<n.length;r++)n[r]<a[r]&&e&&(t.push({index:r,cross:!1}),e=!1),n[r]>a[r]&&!e&&(t.push({index:r,cross:!0}),e=!0);return t}const aroon={up:aroon_up,down:aroon_down,osc:aroon_osc}
