/* ta.js (c) Nino Kroesen. MIT License. */ async function median(a,n){for(var e=[],t=n||a.length;t<=a.length;t++){var r=a.slice(t-n,t);r.sort((a,n)=>a>n?-1:a<n?1:0),e.push(r[Math.round(r.length/2)])}return e}async function kmeans(a,n){var e,t=[],r=[],l=[],s=!1,o=Math.round(a.length/(n+1));for(i=0;i<n;i++)r[i]=a[o*(i+1)];do{for(i=0;i<n;i++)t[i]=[];for(x=0;x<a.length;x++){var h=-1;for(y=0;y<n;y++){var u=Math.abs(r[y]-a[x]);-1===h?(h=u,e=y):u<=h&&(h=u,e=y)}t[e].push(a[x])}for(l=r,x=0;x<n;x++){var c=0;for(y=0;y<t[x].length;y++)c+=t[x][y];var p=c/t[e].length;r[x]=p}for(x=0;x<n;x++)r[x]!==l[x]&&(s=!0)}while(s);return t}async function normalize(a,n){n=n||0;for(var e=await Math.max.apply(null,a.slice())*(1+n),t=await Math.min.apply(null,a.slice())*(1-n),r=[],l=0;l<a.length;l++)r.push(1-(e-a[l])/(e-t));return r}async function denormalize(a,n,e){e=e||0;for(var t=await Math.max.apply(null,a.slice())*(1+e),r=await Math.min.apply(null,a.slice())*(1-e),l=[],s=0;s<n.length;s++)l.push(r+n[s]*(t-r));return l}async function standardize(a){for(var n=await sma(a,a.length),e=await std(a),t=[],r=0;r<a.length;r++)t.push((a[r]-n[0])/e);return t}async function mad(a,n){for(var e=n||a.length,t=[],r=e;r<=a.length;r++){var l=a.slice(r-e,r),s=await median(l),o=l.map(a=>Math.abs(a-s[s.length-1]));o=await median(o),t.push(o[o.length-1])}return t}async function aad(a,n){for(var e=n||a.length,t=[],r=e;r<=a.length;r++){var l=a.slice(r-e,r),s=0,o=await sma(l,e);for(q in l)s+=Math.abs(l[q]-o[o.length-1]);t.push(s/e)}return t}async function ssd(a,n){for(var e=n||a.length,t=[],r=e;r<=a.length;r++){var l=a.slice(r-e,r),s=await sma(l,e),o=0;for(let a in l)o+=(l[a]-s[s.length-1])**2;t.push(Math.sqrt(o))}return t}async function rsi(a,n){for(var e=n||14,t=[],r=a.slice(0,e),l=e,s=0,o=0;l<a.length;l++,s=0,o=0){r.push(a[l]);for(var h=1;h<r.length;h++)r[h]-r[h-1]<0?o+=Math.abs(r[h]-r[h-1]):s+=r[h]-r[h-1];var u=100-100/(1+s/e/(o/e));t.push(u),r.splice(0,1)}return t}async function wrsi(a,n){for(var e=n||14,t=[],r=[],l=[],s=1;s<a.length;s++)a[s]-a[s-1]<0?(l.push(Math.abs(a[s]-a[s-1])),r.push(0)):(l.push(0),r.push(a[s]-a[s-1]));l=await wsma(l,e),r=await wsma(r,e);for(let a in l)t.push(100-100/(1+r[a]/l[a]));return t}async function tsi(a,n,e,t){for(var r=n||25,l=e||13,s=t||13,o=[],h=[],u=[],i=[],c=1;c<a.length;c++)o.push(a[c]-a[c-1]),h.push(Math.abs(a[c]-a[c-1]));var p=await ema(o,r),f=await ema(h,r),g=await ema(p,l),m=await ema(f,l);for(c=0;c<g.length;c++)u.push(g[c]/m[c]);var v=await ema(u,s);u.splice(0,u.length-v.length);for(c=0;c<v.length;c++)i.push([v[c],u[c]]);return i}async function bop(a,n){var e=a.map(a=>(a[3]-a[0])/(a[1]-a[2]));n=n||14;return e=await sma(e,n)}async function fi(a,n){for(var e=n||13,t=[],r=[],l=1;l<a.length;l++)if(t.push((a[l][0]-a[l-1][0])*a[l][1]),t.length>=e){var s=await ema(t,e);r.push(s[s.length-1]),t.splice(0,1)}return r}async function asi(a){for(var n=[],e=1;e<a.length;e++){var t,r=a[e][1],l=a[e-1][1],s=a[e][0],o=a[e-1][0],h=a[e][2],u=a[e-1][2],i=o-r>u-r?o-r:u-r,c=a[e][0],p=a[e-1][0],f=Math.max(a[e][0],a[e-1][0])-Math.min(a[e][2],a[e-1][2]);s-l>h-l&&s-l>s-h&&(t=s-l-(h-l)/2+(l-p)/4),h-l>s-l&&h-l>s-h&&(t=h-l-(s-l)/2+(l-p)/4),s-h>s-l&&s-h>h-l&&(t=s-h+(l-p)/4),n.push((l-r+(l-p)/2+(r-c)/2)/t*50*i/f)}return n}async function ao(a,n,e){var t=n||5,r=e||35,l=[];a=a.map(a=>(a[0]+a[1])/2);for(var s=r;s<=a.length;s++){var o=a.slice(s-r,s),h=await sma(o,t),u=await sma(o,r);l.push(h[h.length-1]-u[u.length-1])}return l}async function ac(a,n,e){n=n||5,e=e||35;var t=await ao(a,n,e),r=await sma(t,n),l=[];t.length>r.length?t.splice(0,t.length-r.length):r.splice(0,r.length-t.length);for(let a in t)l.push(t[a]-r[a]);return l}async function fib(a,n){return[a,.236*(n-a)+a,.382*(n-a)+a,.5*(n-a)+a,.618*(n-a)+a,.786*(n-a)+a,n,1.618*(n-a)+a,2.618*(n-a)+a,3.618*(n-a)+a,4.236*(n-a)+a]}async function pr(a,n){for(var e=n||14,t=[],r=e;r<=a.length;r++){var l=a.slice(r-e,r),s=await Math.max.apply(null,l),o=await Math.min.apply(null,l);t.push((s-a[r-1])/(s-o)*-100)}return t}async function lsma(a,n){for(var e=n||25,t=[],r=e;r<=a.length;r++){for(var l,s,o=a.slice(r-e,r),h=0,u=0,i=0,c=0,p=1;p<=e;p++)h+=p,u+=o[p-1],i+=o[p-1]*p,c+=p*p,o[p-1]*o[p-1];s=u/e-(l=(i-h*u/e)/(c-h*h/e))*h/e,t.push(l*e+s)}return t}async function don(a,n){for(var e=[],t=n||20,r=t;r<=a.length;r++){var l=a.slice(r-t,r),s=[],o=[];for(let a in l)s.push(l[a][0]),o.push(l[a][1]);var h=Math.max.apply(null,s.slice()),u=Math.min.apply(null,o.slice());e.push([h,(h+u)/2,u])}return e}async function ichimoku(a,n,e,t,r){for(var l=[],s=n||9,o=e||26,h=t||52,u=r||26,i=[],c=[],p=0;p<a.length;p++)if(l.push(a[p]),l.length>=h){var f=[],g=[];for(let a in l)f.push(l[a][0]),g.push(l[a][2]);var m=(Math.max.apply(null,f.slice(f.length-s,f.length))+Math.min.apply(null,g.slice(g.length-s,g.length)))/2,v=(Math.max.apply(null,f.slice(f.length-o,f.length))+Math.min.apply(null,g.slice(g.length-o,g.length)))/2,d=a[p][1]+v,x=(Math.max.apply(null,f.slice(f.length-h,f.length))+Math.min.apply(null,g.slice(g.length-o,g.length)))/2;chik=a[p][1],c.push([m,v,d,x,chik]),l.splice(0,1)}for(p=u;p<c.length-u;p++)i.push([c[p][0],c[p][1],c[p+u][2],c[p+u][3],c[p-u][4]]);return i}async function stoch(a,n,e,t){var r=n||14,l=e||3,s=t||3,o=[],h=[],u=[],i=[];r<l&&([r,l]=[l,r]),s>l&&([s,l]=[l,s]);for(var c=0;c<a.length;c++){if(h.push(a[c][0]),u.push(a[c][2]),h.length>=r){var p=await Math.max.apply(null,h),f=await Math.min.apply(null,u),g=100*(a[c][1]-f)/(p-f);i.push(g)}if(s>0&&i.length>s){var m=await sma(i,s);i.push(m[m.length-1])}if(i.length-s>=l){var v=await sma(i,l);o.push([g,v[v.length-1]]),h.splice(0,1),u.splice(0,1),i.splice(0,1)}}return o}async function atr(a,n){for(var e=n||14,t=[a[0][0]-a[0][2]],r=1;r<a.length;r++){var l=await Math.max(a[r][0]-a[r-1][1],a[r][2]-a[r-1][1],a[r][0]-a[r][2]);t.push((t[t.length-1]*(e-1)+l)/e)}return t}async function sma(a,n){for(var e=n||14,t=[],r=e,l=0;r<=a.length;r++,l=0){var s=a.slice(r-e,r);for(q in s)l+=s[q];t.push(l/e)}return t}async function smma(a,n){for(var e=n||14,t=[],r=e;r<=a.length;r++){var l=a.slice(r-e,r),s=0;for(q in l)s+=l[q];t.length<=0?t.push(s/e):t.push((s-t[t.length-1])/e)}return t.splice(0,1),t}async function wma(a,n){for(var e=n||14,t=0,r=[],l=1;l<=e;l++)t+=l;for(l=e;l<=a.length;l++){var s=a.slice(l-e,l),o=0;for(q in s)o+=s[q]*(Number(q)+1)/t;r.push(o)}return r}async function wsma(a,n){for(var e=n||14,t=[],r=1/e,l=e;l<=a.length;l++)if(t.length>0)t.push((a[l-1]-t[t.length-1])*r+t[t.length-1]);else{var s=a.slice(l-e,l),o=0;for(q in s)o+=s[q];t.push(o/e)}return t}async function pwma(a,n){for(var e=0,t=[],r=[],l=n||14,s=l/2,o=n;s>=1;s--,o--)s%1!=0?e+=(s=Math.round(s))*o:(r.push(s*o),e+=s*o*2),r.unshift(s*o);for(s=l;s<=a.length;s++){for(var h=0,u=a.slice(s-l,s),i=l-1;i>=0;i--)h+=u[i]*r[i]/e;t.push(h)}return t}async function hwma(a,n){for(var e=0,t=[],r=[],l=n||14,s=1,o=l;s<=l/2;s++,o--)s%1!=0?e+=(s=Math.round(s))*o:(r.push(s*o),e+=s*o*2),r.unshift(s*o);for(s=l;s<=a.length;s++){for(var h=0,u=a.slice(s-l,s),i=l-1;i>=0;i--)h+=u[i]*r[i]/e;t.push(h)}return t}async function vwma(a,n){for(var e=n||20,t=[],r=(a=a.map(a=>[a[0]*a[1],a[1]]),e);r<=a.length;r++){for(var l=a.slice(r-e,r),s=0,o=0,h=0;h<l.length;h++)s+=l[h][1],o+=l[h][0];t.push(o/s)}return t}async function ema(a,n){for(var e=n||12,t=[],r=2/(e+1),l=e;l<=a.length;l++)if(t.length>0)t.push((a[l-1]-t[t.length-1])*r+t[t.length-1]);else{var s=a.slice(l-e,l),o=0;for(q in s)o+=s[q];t.push(o/e)}return t}async function hull(a,n){var e=n||14,t=[],r=[],l=await wma(a,e),s=Math.round(Math.sqrt(e)),o=await wma(a,Math.round(e/2));o.splice(0,o.length-l.length);for(let a in l)if(t.push(2*o[a]-l[a]),t.length>=s){var h=await wma(t,s);r.push(h[0]),t.splice(0,1)}return r}async function kama(a,n,e,t){n=n||10,e=e||2,t=t||30;for(var r=[(r=await sma(a,n))[r.length-1]],l=n+1;l<a.length;l++){for(var s=0,o=Math.abs(a[l]-a[l-n]),h=1;h<n;h++)s+=Math.abs(a[l-h]-a[l-h-1]);var u=(o/s*(2/(e+1)-2/(t+1)+2/(t+1)))**2;r.push(r[r.length-1]+u*(a[l]-r[r.length-1]))}return r}async function macd(a,n,e){var t=n||12,r=e||26;t>r&&([t,r]=[r,t]);var l=await ema(a,t),s=await ema(a,r),o=[];l.splice(0,r-t);for(var h=0;h<s.length;h++)o.push(l[h]-s[h]);return o}async function bands(a,n,e){for(var t=n||14,r=e||1,l=[],s=[],o=[],h=await sma(a,t),u=0;u<a.length;u++)if(l.push(a[u]),l.length>=t){var i=await std(l,t);s.push(i),l.splice(0,1)}for(u=0;u<h.length;u++)o.push([h[u]+s[u]*r,h[u],h[u]-s[u]*r]);return o}async function bandwidth(a,n,e){for(var t=n||14,r=e||1,l=[],s=await bands(a,t,r),o=0;o<s.length;o++)l.push((s[o][0]-s[o][2])/s[o][1]);return l}async function keltner(a,n,e){var t,r=n||14,l=e||1,s=[],o=await atr(a,r),h=[];for(var u in a)s.push((a[u][0]+a[u][1]+a[u][2])/3);t=await sma(s,r),o.splice(0,r-1);for(u=0;u<t.length;u++)h.push([t[u]+o[u]*l,t[u],t[u]-o[u]*l]);return h}async function variance(a,n){for(var e=n||a.length,t=[],r=e;r<=a.length;r++){var l=a.slice(r-e,r),s=await sma(l,e),o=0;for(x in l)o+=(l[x]-s[s.length-1])**2;t.push(o/e)}return t}async function std(a,n){var e=n||a.length,t=a.reduce((a,n)=>Number(a)+Number(n))/e;return Math.sqrt(a.reduce((a,n)=>a+Math.pow(n-t,2),0)/e)}async function normsinv(a){var n=-.00778489400243029,e=-.322396458041136,t=-2.40075827716184,r=-2.54973253934373,l=4.37466414146497,s=2.93816398269878,o=.00778469570904146,h=.32246712907004,u=2.445134137143,i=3.75440866190742;if(a<0||a>1)return 0;if(a<.02425)return(((((n*(c=Math.sqrt(-2*Math.log(a)))+e)*c+t)*c+r)*c+l)*c+s)/((((o*c+h)*c+u)*c+i)*c+1);if(a<=.97575){var c,p=(c=a-.5)*c;return(((((-39.6968302866538*p+220.946098424521)*p-275.928510446969)*p+138.357751867269)*p-30.6647980661472)*p+2.50662827745924)*c/(((((-54.4760987982241*p+161.585836858041)*p-155.698979859887)*p+66.8013118877197)*p-13.2806815528857)*p+1)}return-(((((n*(c=Math.sqrt(-2*Math.log(1-a)))+e)*c+t)*c+r)*c+l)*c+s)/((((o*c+h)*c+u)*c+i)*c+1)}async function sim(a,n,e,t){for(var r=[],l=(n=n||50,e=e||1e3,0);l<e;l++){for(var s=a.slice(),o=0;o<n;o++){for(var h=[],u=1;u<s.length;u++){var i=await dif(s[u],s[u-1]);h.push(i)}var c=await sma(h,h.length),p=await std(h),f=await normsinv(Math.random());s.push(s[s.length-1]*Math.exp(c[0]-p*p/2+p*f))}r.push(s)}if(!t)return r;var g=a.slice();for(l=a.length;l<r[0].length;l++)r.sort((a,n)=>a[l]>n[l]?1:a[l]<n[l]?-1:0),g.push(r[Math.round(r.length*t)][l]);return g}async function percentile(a,n){for(var e=[],t=0;t<a[0].length;t++)a.sort((a,n)=>a[t]>n[t]?1:a[t]<n[t]?-1:0),e.push(a[Math.round((a.length-1)*n)][t]);return e}async function cor(a,n){for(var e=await sma(a,a.length),t=await sma(n,n.length),r=0,l=0,s=0,o=0;o<a.length;o++){var h=a[o]-e,u=n[o]-t;r+=h*u,l+=Math.pow(h,2),s+=Math.pow(u,2)}var i=a.length-1;return l/=i,s/=i,r/(i*(l=Math.sqrt(l))*(s=Math.sqrt(s)))}async function dif(a,n){return(a-n)/n}async function drawdown(a){for(var n=a[0],e=a[0],t=0,r=1;r<a.length;r++){if(a[r]>n){if(0!=e)(l=await dif(e,n))<t&&(t=l),e=a[r];n=a[r]}a[r]<e&&(e=a[r])}var l;return(l=await dif(e,n))<t&&(t=l),t}async function aroon_up(a,n){for(var e=n||10,t=[],r=e;r<=a.length;r++){var l=a.slice(r-e,r),s=l.slice();s.sort((a,n)=>a-n),t.push(100*(e-1-l.reverse().findIndex(a=>a===s[e-1]))/(e-1))}return t}async function aroon_down(a,n){for(var e=n||10,t=[],r=e;r<=a.length;r++){var l=a.slice(r-e,r),s=l.slice();s.sort((a,n)=>a-n),t.push(100*(e-1-l.reverse().findIndex(a=>a===s[0]))/(e-1))}return t}async function aroon_osc(a,n){for(var e=n||25,t=[],r=await aroon.up(a,e),l=await aroon.down(a,e),s=0;s<r.length;s++)t.push(r[s]-l[s]);return t}async function mfi(a,n){for(var e=n||14,t=[],r=a.map(a=>a[1]),l=a.map(a=>a[0]),s=e;s<=a.length;s++){var o=0,h=0;for(q=s-e;q<s;q++)o+=l[q],h+=r[q];t.push(100-100/(1+o/h))}return t}async function roc(a,n){for(var e=n||14,t=[],r=e;r<=a.length;r++)t.push((a[r-1]-a[r-e])/a[r-e]);return t}async function cop(a,n,e,t){n=n||11,e=e||14,t=t||10,max=Math.max(n,e),co=[];for(var r=max+t;r<a.length;r++){var l=a.slice(r-(max+t),r),s=l.slice(),o=[];l=await roc(l,n),s=await roc(s,e),l.splice(0,l.length-s.length),s.splice(0,s.length-l.length);for(var h=0;h<l.length;h++)o.push(l[h]+s[h]);o=await wma(o,t),co.push(o[o.length-1])}return co}async function kst(a,n,e,t,r,l,s,o,h,u){n=n||10,e=e||15,t=t||20,r=r||30,l=l||10,s=s||10,o=o||10,h=h||15,u=u||9;for(var i=[],c=[],p=Math.max(n,e,t,r)+Math.max(l,s,o,h),f=p;f<=a.length;f++){var g=a.slice(f-p,f),m=await roc(g,n),v=await roc(g,e),d=await roc(g,t),x=await roc(g,r);m=await sma(m,l),v=await sma(v,s),d=await sma(d,o),x=await sma(x,h),i.push(m[m.length-1]+v[v.length-1]+d[d.length-1]+x[x.length-1])}var w=await sma(i,u);for(var f in i.splice(0,i.length-w.length),w)c.push([i[f],w[f]]);return c}async function obv(a){for(var n=[0],e=1;e<a.length;e++)a[e][1]>a[e-1][1]&&n.push(n[n.length-1]+a[e][0]),a[e][1]<a[e-1][1]&&n.push(n[n.length-1]-a[e][0]),a[e][1]===a[e-1][1]&&n.push(n[n.length-1]);return n}async function vwap(a,n){for(var e=!n||n>a.length?a.length:n,t=(a=a.map(a=>[a[0]*a[1],a[1]]),[]),r=e;r<=a.length;r++){for(var l=a.slice(r-e,r),s=0,o=0,h=0;h<l.length;h++)s+=l[h][1],o+=l[h][0];t.push(o/s)}return t}async function mom(a,n,e){for(var t=n||10,r=[],l=t-1;l<a.length;l++)e?r.push(a[l]/a[l-(t-1)]*100):r.push(a[l]-a[l-(t-1)]);return r}async function mom_osc(a,n){for(var e=n?n+1:10,t=[],r=e;r<=a.length;r++){for(var l=0,s=0,o=1;o<e;o++)a[r-e+(o-1)]<a[r-e+o]?l+=a[r-e+o]:s+=a[r-e+o];t.push((l-s)/(l+s)*100)}return t}async function ha(a){for(var n=[[(Number(a[0][0])+Number(a[0][3]))/2,Number(a[0][1]),Number(a[0][2]),(Number(a[0][0])+Number(a[0][1])+Number(a[0][2])+Number(a[0][3]))/4]],e=1;e<a.length;e++)n.push([(n[n.length-1][0]+n[n.length-1][3])/2,Math.max(n[n.length-1][0],n[n.length-1][3],a[e][1]),Math.min(n[n.length-1][0],n[n.length-1][3],a[e][2]),(a[e][0]+a[e][1]+a[e][2]+a[e][3])/4]);return n}async function ren(a,n){for(var e=[],t=(n=n||1,Math.floor(n)===n?0:n.toString().split(".")[1].length||0),r=Math.ceil(a[0][0]/n*10**t)/10**t*n,l=r-n,s=1;s<a.length;s++){if(a[s][0]>r+n)do{e.push([r,r+n,r,r+n]),r+=n,l+=n}while(a[s][0]>r+n);if(a[s][1]<l-n)do{e.push([l,l,l-n,l-n]),r-=n,l-=n}while(a[s][1]<l-n)}return e}async function envelope(a,n,e){e=e||.005;for(var t=[],r=n=n||10;r<a.length;r++){var l=await sma(a.slice(r-n,r),n);t.push([l[0]*(1+e),l[0],l[0]*(1-e)])}return t}async function chaikin_osc(a,n,e){n=n||3,e=e||10;for(var t=[],r=[],l=0;l<a.length;l++){var s=(a[l][1]-a[l][2]-(a[l][0]-a[l][1]))/(a[l][0]-a[l][2]);isNaN(s)?r.push(0):r.push(s*a[l][3])}var o=await ema(r,n),h=await ema(r,e);o.length>h.length?o.splice(0,o.length-h.length):h.splice(0,h.length-o.length);for(l=0;l<o.length;l++)t.push(o[l]-h[l]);return t}async function fractals(a){for(var n=[[!1,!1],[!1,!1]],e=2;e<a.length-2;e++){var t=a[e-2][0]<a[e][0]&&a[e-1][0]<a[e][0]&&a[e][0]>a[e+1][0]&&a[e][0]>a[e+2][0],r=a[e-2][1]>a[e][1]&&a[e-1][1]>a[e][1]&&a[e][1]<a[e+1][1]&&a[e][1]<a[e+2][1];n.push([t,r])}return n.push([!1,!1],[!1,!1]),n}async function alligator(a,n,e,t,r,l,s){n=n||13,e=e||8,t=t||5,r=r||8,l=l||5,s=s||3;var o=[],h=await smma(a,n),u=await smma(a,e),i=await smma(a,t);u.splice(0,u.length-h.length),i.splice(0,i.length-h.length);for(var c=h.length-1;c>=7;c--)o.push([h[c-(r-1)],u[c-(l-1)],i[c-(s-1)]]);return o}async function gator(a,n,e,t,r,l,s){n=n||13,e=e||8,t=t||5,r=r||8,l=l||5,s=s||3;var o=[],h=await smma(a,n),u=await smma(a,e),i=await smma(a,t);u.splice(0,u.length-h.length),i.splice(0,i.length-h.length);for(var c=h.length-1;c>=r-1;c--)o.push([h[c-(r-1)]-u[c-(l-1)],-Math.abs(u[c-(l-1)]-i[c-(s-1)])]);return o}async function recent_high(a,n){var e=n,t=0,r=a[a.length-1];n=n||25;for(var l=a.length-2;l>=0&&(a[l]>=r&&e>0?(r=a[l],t=l,e=n):e--,!(e<=0));l--);return{index:t,value:r}}async function recent_low(a,n){var e=n,t=0,r=a[a.length-1];n=n||25;for(var l=a.length-2;l>=0&&(a[l]<=r&&e>0?(r=a[l],t=l,e=n):e--,!(e<=0));l--);return{index:t,value:r}}async function support(a,n){var e,t,r=(n=n||await recent_low(a)).value;do{for(var l=n.index;l<a.length;l++){var s=(n.value-a[l])/(n.index-l);s<r&&(r=s,e=l)}n.index+1==e&&e!=a.length-1?(n.index=e,r=Math.min.apply(null,a.slice()),n.value=a[n.index],t=!1):t=!0,n.index==a.length-1&&(t=!0)}while(!t);return e==a.length-1||n.index==a.length-1?{calculate:async a=>n.value,slope:0,lowest:n.value,index:n.index}:{calculate:async a=>a*r+n.value,slope:r,lowest:n.value,index:n.index}}async function resistance(a,n){var e,t,r=(n=n||await recent_high(a)).value;do{for(var l=n.index;l<a.length;l++){var s=(a[l]-n.value)/(n.index-l);s<r&&(r=s,e=l)}n.index+1==e&&e!=a.length-1?(n.index=e,r=Math.max.apply(null,a.slice()),n.value=a[n.index],t=!1):t=!0,n.index==a.length-1&&(t=!0)}while(!t);return e==a.length-1||n.index==a.length-1?{calculate:async a=>n.value,slope:0,highest:n.value,index:n.index}:{calculate:async a=>a*-r+n.value,slope:r,highest:n.value,index:n.index}};const aroon={up:aroon_up,down:aroon_down,osc:aroon_osc}
