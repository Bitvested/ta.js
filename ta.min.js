/* ta.js (c) Nino Kroesen. MIT License. */ function median(e,n=e.length){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_);t.sort((e,n)=>e-n),r.push(t[Math.round(t.length/2)-1])}return r}function kmeans(e,n){for(var _,r=[],t=[],l=[],$=!1,a=Math.round(e.length/(n+1)),s=0;s<n;s++)t[s]=e[a*(s+1)];do{for(var s=0;s<n;s++)r[s]=[];for(var h=0;h<e.length;h++){for(var u=-1,o=0;o<n;o++){var i=Math.abs(t[o]-e[h]);-1===u?(u=i,_=o):i<=u&&(u=i,_=o)}r[_].push(e[h])}l=t;for(var h=0;h<n;h++){for(var p=0,o=0;o<r[h].length;o++)p+=r[h][o];var g=p/r[_].length;t[h]=g}for(var h=0;h<n;h++)t[h]!==l[h]&&($=!0)}while($);return r}function normalize(e,n=0){for(var _=0,r=Math.max.apply(null,e.slice())*(1+n),t=Math.min.apply(null,e.slice())*(1-n),l=[];_<e.length;_++)l.push(1-(r-e[_])/(r-t));return l}function denormalize(e,n,_=0){for(var r=0,t=Math.max.apply(null,e.slice())*(1+_),l=Math.min.apply(null,e.slice())*(1-_),$=[];r<n.length;r++)$.push(l+n[r]*(t-l));return $}function normalize_pair(e,n){for(var _=1,r=(e[0]+n[0])/2,t=[[r,r]];_<e.length;_++)t.push([t[t.length-1][0]*((e[_]-e[_-1])/e[_-1]+1),t[t.length-1][1]*((n[_]-n[_-1])/n[_-1]+1)]);return t}function normalize_from(e,n){for(var _=1,r=[n];_<e.length;_++)r.push(r[r.length-1]*((e[_]-e[_-1])/e[_-1]+1));return r}function standardize(e){for(var n=module.exports.sma(e,e.length),_=module.exports.std(e),r=[],t=0;t<e.length;t++)r.push((e[t]-n[0])/_);return r}function mad(e,n=e.length){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=module.exports.median(t),$=t.map(e=>Math.abs(e-l[l.length-1]));$=module.exports.median($),r.push($[$.length-1])}return r}function aad(e,n=e.length){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=0,$=module.exports.sma(t,n);for(var a in t)l+=Math.abs(t[a]-$[$.length-1]);r.push(l/n)}return r}function ssd(e,n=e.length){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=module.exports.sma(t,n),$=0;for(var a in t)$+=(t[a]-l[l.length-1])**2;r.push(Math.sqrt($))}return r}function er(e){var n=[],_=[],r=1,t=1;for(var l in e)e[l]>=0?n.push(1+e[l]):_.push(1+e[l]);var $=n.length/e.length,a=_.length/e.length;for(var l in _)t*=_[l];for(var l in n)r*=n[l];return((r**(1/n.length)-1)*100*$+(t**(1/_.length)-1)*100*a)/100}function ar(e,n=e.length){for(var _=n,r=[];_<e.length;_++){var t=module.exports.er(e.slice(_-n,_));r.push(e[_]-t)}return r}function kelly(e){var n=module.exports.er(e)+1,_=module.exports.winratio(e);return isNaN(n)&&(n=1),_-(1-_)/n}function martingale(e,n,_,r=2){var t=n;for(var l in e)e[l]<0?t*=r:e[l]>0&&(t=n);return t>_?_:t}function antimartingale(e,n,_,r=2){var t=n;for(var l in e)e[l]>0?t*=r:e[l]<0&&(t=n);return t>_?_:t}function winratio(e){var n=0,_=0;for(var r in e)e[r]>=0?n++:_++;return n/(_+n)}function avgwin(e){for(var n=0,_=[];n<e.length;n++)e[n]>=0&&_.push(e[n]);return module.exports.sma(_,_.length)[0]}function avgloss(e){for(var n=[],_=0;_<e.length;_++)e[_]<0&&n.push(e[_]);return module.exports.sma(n,n.length)[0]}function zscore(e,n=e.length){for(var _=n-1,r=[],t=e.slice(0,n-1);_<e.length;_++){t.push(e[_]);var l=module.exports.sma(t,n),$=module.exports.std(t,n);r.push((e[_]-l[0])/$),t.splice(0,1)}return r}function rsi(e,n=14){for(var _=n-1,r=0,t=0,l=[],$=e.slice(0,n-1);_<e.length;_++,r=0,t=0){$.push(e[_]);for(var a=1;a<$.length;a++)$[a]-$[a-1]<0?t+=Math.abs($[a]-$[a-1]):r+=$[a]-$[a-1];var s=100-100/(1+r/n/(t/n));l.push(s),$.splice(0,1)}return l}function wrsi(e,n=14){for(var _=1,r=[],t=[],l=[];_<e.length;_++)e[_]-e[_-1]<0?(l.push(Math.abs(e[_]-e[_-1])),t.push(0)):(l.push(0),t.push(e[_]-e[_-1]));for(var _ in l=module.exports.wsma(l,n),t=module.exports.wsma(t,n),l)r.push(100-100/(1+t[_]/l[_]));return r}function tsi(e,n=25,_=13,r=13){for(var t=1,l=[],$=[],a=[],s=[];t<e.length;t++)l.push(e[t]-e[t-1]),$.push(Math.abs(e[t]-e[t-1]));for(var h=module.exports.ema(l,n),u=module.exports.ema($,n),o=module.exports.ema(h,_),i=module.exports.ema(u,_),t=0;t<o.length;t++)a.push(o[t]/i[t]);var p=module.exports.ema(a,r);a.splice(0,a.length-p.length);for(var t=0;t<p.length;t++)s.push([p[t],a[t]]);return s}function bop(e,n=14){var _=e.map(e=>(e[3]-e[0])/(e[1]-e[2])),_=module.exports.sma(_,n);return _}function fi(e,n=13){for(var _=1,r=[],t=[];_<e.length;_++)if(r.push((e[_][0]-e[_-1][0])*e[_][1]),r.length>=n){var l=module.exports.ema(r,n);t.push(l[l.length-1]),r.splice(0,1)}return t}function asi(e){for(var n=1,_=[];n<e.length;n++){var r,t=e[n][1],l=e[n-1][1],$=e[n][0],a=e[n-1][0],s=e[n][2],h=e[n-1][2],u=a-t>h-t?a-t:h-t,o=e[n][0],i=e[n-1][0],p=Math.max(e[n][0],e[n-1][0])-Math.min(e[n][2],e[n-1][2]);$-l>s-l&&$-l>$-s&&(r=$-l-(s-l)/2+(l-i)/4),s-l>$-l&&s-l>$-s&&(r=s-l-($-l)/2+(l-i)/4),$-s>$-l&&$-s>s-l&&(r=$-s+(l-i)/4),_.push(50*((l-t+(l-i)/2+(t-o)/2)/r)*u/p)}return _}function ao(e,n=5,_=35){e=e.map(e=>(e[0]+e[1])/2);for(var r=_,t=[];r<=e.length;r++){var l=e.slice(r-_,r),$=module.exports.sma(l,n),a=module.exports.sma(l,_);t.push($[$.length-1]-a[a.length-1])}return t}function ac(e,n=5,_=35){var r=ao(e,n,_),t=sma(r,n),l=[];for(var $ in r.length>t.length?r.splice(0,r.length-t.length):t.splice(0,t.length-r.length),r)l.push(r[$]-t[$]);return l}const fib=(e,n)=>[e,(n-e)*.236+e,(n-e)*.382+e,(n-e)*.5+e,(n-e)*.618+e,(n-e)*.786+e,n,(n-e)*1.618+e,(n-e)*2.618+e,(n-e)*3.618+e,(n-e)*4.236+e];function pr(e,n=14){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=Math.max.apply(null,t),$=Math.min.apply(null,t);r.push(-((l-e[_-1])/(l-$)*100))}return r}function lsma(e,n=25){for(var _=n,r=[];_<=e.length;_++){for(var t,l,$=e.slice(_-n,_),a=0,s=0,h=0,u=0,o=0,i=1;i<=n;i++)a+=i,s+=$[i-1],h+=$[i-1]*i,u+=i*i,o+=$[i-1]*$[i-1];t=(h-a*s/n)/(u-a*a/n),l=s/n-t*a/n,r.push(t*n+l)}return r}function don(e,n=20){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=[],$=[];for(var a in t)l.push(t[a][0]),$.push(t[a][1]);var s=Math.max.apply(null,l.slice()),h=Math.min.apply(null,$.slice());r.push([s,(s+h)/2,h])}return r}function ichimoku(e,n=9,_=26,r=52,t=26){for(var l=0,$=[],a=[],s=[];l<e.length;l++)if($.push(e[l]),$.length>=r){var h=[],u=[];for(var o in $)h.push($[o][0]),u.push($[o][2]);var i=(Math.max.apply(null,h.slice(h.length-n,h.length))+Math.min.apply(null,u.slice(u.length-n,u.length)))/2,p=(Math.max.apply(null,h.slice(h.length-_,h.length))+Math.min.apply(null,u.slice(u.length-_,u.length)))/2,g=e[l][1]+p,v=(Math.max.apply(null,h.slice(h.length-r,h.length))+Math.min.apply(null,u.slice(u.length-_,u.length)))/2;chik=e[l][1],s.push([i,p,g,v,chik]),$.splice(0,1)}for(var l=t;l<s.length-t;l++)a.push([s[l][0],s[l][1],s[l+t][2],s[l+t][3],s[l-t][4]]);return a}function stoch(e,n=14,_=3,r=3){n<_&&([n,_]=[_,n]),r>_&&([r,_]=[_,r]);for(var t=0,l=[],$=[],a=[],s=[];t<e.length;t++){if($.push(e[t][0]),a.push(e[t][2]),$.length>=n){var h=Math.max.apply(null,$),u=Math.min.apply(null,a),o=100*(e[t][1]-u)/(h-u);s.push(o)}if(r>0&&s.length>r){var i=module.exports.sma(s,r);s.push(i[i.length-1])}if(s.length-r>=_){var p=module.exports.sma(s,_);l.push([o,p[p.length-1]]),$.splice(0,1),a.splice(0,1),s.splice(0,1)}}return l}function atr(e,n=14){for(var _=1,r=[e[0][0]-e[0][2]];_<e.length;_++){var t=Math.max(e[_][0]-e[_-1][1],e[_][2]-e[_-1][1],e[_][0]-e[_][2]);r.push((r[r.length-1]*(n-1)+t)/n)}return r}function sma(e,n=14){for(var _=n,r=[];_<=e.length;_++){var t=module.exports.sum(e.slice(_-n,_));r.push(t/n)}return r}function smma(e,n=14){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=0;for(var $ in t)l+=t[$];r.length<=0?r.push(l/n):r.push((l-r[r.length-1])/n)}return r.splice(0,1),r}function wma(e,n=14){for(var _=1,r=0,t=[];_<=n;_++)r+=_;for(var _=n;_<=e.length;_++){var l=e.slice(_-n,_),$=0;for(var a in l)$+=l[a]*(Number(a)+1)/r;t.push($)}return t}function wsma(e,n=14){for(var _=n,r=[],t=1/n;_<=e.length;_++){if(r.length>0){r.push((e[_-1]-r[r.length-1])*t+r[r.length-1]);continue}var l=e.slice(_-n,_),$=0;for(var a in l)$+=l[a];r.push($/n)}return r}function pwma(e,n=14){for(var _=n/2,r=n,t=0,l=[],$=[];_>=1;_--,r--)_%1!=0?t+=(_=Math.round(_))*r:($.push(_*r),t+=_*r*2),$.unshift(_*r);for(var _=n;_<=e.length;_++){for(var a=0,s=e.slice(_-n,_),h=n-1;h>=0;h--)a+=s[h]*$[h]/t;l.push(a)}return l}function hwma(e,n=14){for(var _=1,r=n,t=0,l=[],$=[];_<=n/2;_++,r--)_%1!=0?t+=(_=Math.round(_))*r:($.push(_*r),t+=_*r*2),$.unshift(_*r);for(var _=n;_<=e.length;_++){for(var a=0,s=e.slice(_-n,_),h=n-1;h>=0;h--)a+=s[h]*$[h]/t;l.push(a)}return l}function vwma(e,n=20){e=e.map(e=>[e[0]*e[1],e[1]]);for(var _=n,r=[];_<=e.length;_++){for(var t=e.slice(_-n,_),l=0,$=0,a=0;a<t.length;a++)l+=t[a][1],$+=t[a][0];r.push($/l)}return r}function ema(e,n=12){for(var _=n,r=[],t=2/(n+1);_<=e.length;_++){if(r.length>0){r.push((e[_-1]-r[r.length-1])*t+r[r.length-1]);continue}var l=e.slice(_-n,_),$=0;for(var a in l)$+=l[a];r.push($/n)}return r}function hull(e,n=14){var _=[],r=[],t=module.exports.wma(e,n),l=Math.round(Math.sqrt(n)),$=wma(e,Math.round(n/2));for(var a in $.splice(0,$.length-t.length),t)if(_.push(2*$[a]-t[a]),_.length>=l){var s=wma(_,l);r.push(s[0]),_.splice(0,1)}return r}function kama(e,n=10,_=2,r=30){for(var t=n+1,l=module.exports.sma(e,n),l=[l[l.length-1]];t<e.length;t++){for(var $=0,a=Math.abs(e[t]-e[t-n]),s=1;s<n;s++)$+=Math.abs(e[t-s]-e[t-s-1]);var h=(a/$*(2/(_+1)-2/(r+1)+2/(r+1)))**2;l.push(l[l.length-1]+h*(e[t]-l[l.length-1]))}return l}function macd(e,n=12,_=26){n>_&&([n,_]=[_,n]);var r=module.exports.ema(e,n),t=module.exports.ema(e,_),l=[];r.splice(0,_-n);for(var $=0;$<t.length;$++)l.push(r[$]-t[$]);return l}function macd_signal(e,n=12,_=26,r=9){var t=module.exports.macd(e,n,_);return module.exports.ema(t,r)}function macd_bars(e,n=12,_=26,r=9){var t=module.exports.macd(e,n,_),l=module.exports.ema(t,r),$=[];for(var a in t.splice(0,t.length-l.length),t)$.push(t[a]-l[a]);return $}function bands(e,n=14,_=1){for(var r=0,t=[],l=[],$=[],a=module.exports.sma(e,n);r<e.length;r++)if(t.push(e[r]),t.length>=n){var s=module.exports.std(t,n);l.push(s),t.splice(0,1)}for(var r=0;r<a.length;r++)$.push([a[r]+l[r]*_,a[r],a[r]-l[r]*_]);return $}function bandwidth(e,n=14,_=1){for(var r=0,t=[],l=module.exports.bands(e,n,_);r<l.length;r++)t.push((l[r][0]-l[r][2])/l[r][1]);return t}function keltner(e,n=14,_=1){var r,t=[],l=module.exports.atr(e,n),$=[];for(var a in e)t.push((e[a][0]+e[a][1]+e[a][2])/3);r=module.exports.sma(t,n),l.splice(0,n-1);for(var a=0;a<r.length;a++)$.push([r[a]+l[a]*_,r[a],r[a]-l[a]*_]);return $}function variance(e,n=e.length){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=module.exports.sma(t,n),$=0;for(var a in t)$+=(t[a]-l[l.length-1])**2;r.push($/n)}return r}function std(e,n=e.length){n<e.length&&e.splice(0,e.length-n);var _=e.reduce((e,n)=>e+n)/n;return Math.sqrt(e.reduce((e,n)=>e+Math.pow(n-_,2),0)/n)}function normsinv(e){if(e<0||e>1)return 0;if(e<.02425){var n=Math.sqrt(-2*Math.log(e));return(((((-.00778489400243029*n+-.322396458041136)*n+-2.40075827716184)*n+-2.54973253934373)*n+4.37466414146497)*n+2.93816398269878)/((((.00778469570904146*n+.32246712907004)*n+2.445134137143)*n+3.75440866190742)*n+1)}if(e<=.97575){var n=e-.5,_=n*n;return(((((-39.6968302866538*_+220.946098424521)*_+-275.928510446969)*_+138.357751867269)*_+-30.6647980661472)*_+2.50662827745924)*n/(((((-54.4760987982241*_+161.585836858041)*_+-155.698979859887)*_+66.8013118877197)*_+-13.2806815528857)*_+1)}var n=Math.sqrt(-2*Math.log(1-e));return-(((((-.00778489400243029*n+-.322396458041136)*n+-2.40075827716184)*n+-2.54973253934373)*n+4.37466414146497)*n+2.93816398269878)/((((.00778469570904146*n+.32246712907004)*n+2.445134137143)*n+3.75440866190742)*n+1)}function sim(e,n=50,_=1e3,r){for(var t=0,l=[];t<_;t++){for(var $=e.slice(),a=0;a<n;a++){for(var s=[],h=1;h<$.length;h++){var u=module.exports.dif($[h],$[h-1]);s.push(u)}var o=module.exports.sma(s,s.length),i=module.exports.std(s),p=module.exports.normsinv(Math.random());$.push($[$.length-1]*Math.exp(o[0]-i*i/2+i*p))}l.push($)}return r?module.exports.percentile(l,r):l}function percentile(e,n){for(var _=0,r=[];_<e[0].length;_++)e.sort((e,n)=>e[_]-n[_]),r.push(e[Math.round((e.length-1)*n)][_]);return r}function cor(e,n){for(var _=module.exports.sma(e,e.length),r=module.exports.sma(n,n.length),t=0,l=0,$=0,a=0;a<e.length;a++){var s=e[a]-_,h=n[a]-r;t+=s*h,l+=Math.pow(s,2),$+=Math.pow(h,2)}var u=e.length-1;return l/=u,$/=u,t/(u*(l=Math.sqrt(l))*($=Math.sqrt($)))}const dif=(e,n)=>(e-n)/n,log=e=>e.map(e=>Math.log(e)),exp=e=>e.map(e=>Math.exp(e));function drawdown(e){for(var n=1,_=e[0],r=e[0],t=0;n<e.length;n++){if(e[n]>_){if(0!=r){var l=module.exports.dif(r,_);l<t&&(t=l),r=e[n]}_=e[n]}e[n]<r&&(r=e[n])}var l=module.exports.dif(r,_);return l<t&&(t=l),t}function aroon_up(e,n=10){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=t.slice();l.sort((e,n)=>e-n),r.push(100*(n-1-t.reverse().findIndex(e=>e===l[n-1]))/(n-1))}return r}function aroon_down(e,n=10){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=t.slice();l.sort((e,n)=>e-n),r.push(100*(n-1-t.reverse().findIndex(e=>e===l[0]))/(n-1))}return r}function aroon_osc(e,n=25){for(var _=0,r=[],t=module.exports.aroon.up(e,n),l=module.exports.aroon.down(e,n);_<t.length;_++)r.push(t[_]-l[_]);return r}function mfi(e,n=14){for(var _=n,r=[],t=e.map(e=>e[1]),l=e.map(e=>e[0]),$=0,a=0;_<=e.length;_++,$=0,a=0){for(var s=_-n;s<_;s++)$+=l[s],a+=t[s];r.push(100-100/(1+$/a))}return r}function roc(e,n=14){for(var _=n,r=[];_<=e.length;_++)r.push((e[_-1]-e[_-n])/e[_-n]);return r}function cop(e,n=11,_=14,r=10){for(var t=Math.max(n,_),l=[],$=t+r;$<e.length;$++){var a=e.slice($-(t+r),$),s=a.slice(),h=[];a=module.exports.roc(a,n),s=module.exports.roc(s,_),a.splice(0,a.length-s.length),s.splice(0,s.length-a.length);for(var u=0;u<a.length;u++)h.push(a[u]+s[u]);h=module.exports.wma(h,r),l.push(h[h.length-1])}return l}function kst(e,n=10,_=15,r=20,t=30,l=10,$=10,a=10,s=15,h=9){for(var u=[],o=[],i=Math.max(n,_,r,t)+Math.max(l,$,a,s),p=i;p<=e.length;p++){var g=e.slice(p-i,p),v=module.exports.roc(g,n),f=module.exports.roc(g,_),c=module.exports.roc(g,r),m=module.exports.roc(g,t);v=module.exports.sma(v,l),f=module.exports.sma(f,$),c=module.exports.sma(c,a),m=module.exports.sma(m,s),u.push(v[v.length-1]+f[f.length-1]+c[c.length-1]+m[m.length-1])}var x=module.exports.sma(u,h);for(var p in u.splice(0,u.length-x.length),x)o.push([u[p],x[p]]);return o}function obv(e){for(var n=1,_=[0];n<e.length;n++)e[n][1]>e[n-1][1]&&_.push(_[_.length-1]+e[n][0]),e[n][1]<e[n-1][1]&&_.push(_[_.length-1]-e[n][0]),e[n][1]===e[n-1][1]&&_.push(_[_.length-1]);return _}function vwap(e,n=e.length){e=e.map(e=>[e[0]*e[1],e[1]]);for(var _=n,r=[];_<=e.length;_++){for(var t=e.slice(_-n,_),l=0,$=0,a=0;a<t.length;a++)l+=t[a][1],$+=t[a][0];r.push($/l)}return r}function mom(e,n=10,_){for(var r=n-1,t=[];r<e.length;r++)_?t.push(e[r]/e[r-(n-1)]*100):t.push(e[r]-e[r-(n-1)]);return t}function mom_osc(e,n=10){n++;for(var _=n,r=[],t=0,l=0;_<=e.length;_++,t=0,l=0){for(var $=1;$<n;$++)e[_-n+($-1)]<e[_-n+$]?t+=e[_-n+$]:l+=e[_-n+$];r.push((t-l)/(t+l)*100)}return r}function ha(e){for(var n=[[(e[0][0]+e[0][3])/2,e[0][1],e[0][2],(e[0][0]+e[0][1]+e[0][2]+e[0][3])/4]],_=1;_<e.length;_++)n.push([(n[n.length-1][0]+n[n.length-1][3])/2,Math.max(n[n.length-1][0],n[n.length-1][3],e[_][1]),Math.min(n[n.length-1][0],n[n.length-1][3],e[_][2]),(e[_][0]+e[_][1]+e[_][2]+e[_][3])/4]);return n}function ren(e,n=1){for(var _=[],r=Math.floor(n)===n?0:n.toString().split(".")[1].length||0,t=Math.ceil(e[0][0]/n*10**r)/10**r*n,l=t-n,$=1;$<e.length;$++){if(e[$][0]>t+n)do _.push([t,t+n,t,t+n]),t+=n,l+=n;while(e[$][0]>t+n);if(e[$][1]<l-n)do _.push([l,l,l-n,l-n]),t-=n,l-=n;while(e[$][1]<l-n)}return _}function envelope(e,n=10,_=.005){for(var r=n,t=[];r<e.length;r++){var l=module.exports.sma(e.slice(r-n,r),n);t.push([l[0]*(1+_),l[0],l[0]*(1-_)])}return t}function chaikin_osc(e,n=3,_=10){for(var r=0,t=[],l=[];r<e.length;r++){var $=(e[r][1]-e[r][2]-(e[r][0]-e[r][1]))/(e[r][0]-e[r][2]);isNaN($)?l.push(0):l.push($*e[r][3])}var a=module.exports.ema(l,n),s=module.exports.ema(l,_);a.length>s.length?a.splice(0,a.length-s.length):s.splice(0,s.length-a.length);for(var r=0;r<a.length;r++)t.push(a[r]-s[r]);return t}function fractals(e,n=!1){for(var _=n?[[-1,-1],[-1,-1]]:[[!1,!1],[!1,!1]],r=2;r<e.length-2;r++){var t=e[r-2][0]<e[r][0]&&e[r-1][0]<e[r][0]&&e[r][0]>e[r+1][0]&&e[r][0]>e[r+2][0]?!n||e[r][0]:!!n&&-1,l=e[r-2][1]>e[r][1]&&e[r-1][1]>e[r][1]&&e[r][1]<e[r+1][1]&&e[r][1]<e[r+2][1]?!n||e[r][1]:!!n&&-1;_.push([t,l])}return n?_.push([[-1,-1],[-1,-1]]):_.push([!1,!1],[!1,!1]),_}function alligator(e,n=13,_=8,r=5,t=8,l=5,$=3){var a=[],s=module.exports.smma(e,n),h=module.exports.smma(e,_),u=module.exports.smma(e,r);h.splice(0,h.length-s.length),u.splice(0,u.length-s.length);for(var o=s.length-1;o>=7;o--)a.push([s[o-(t-1)],h[o-(l-1)],u[o-($-1)]]);return a}function gator(e,n=13,_=8,r=5,t=8,l=5,$=3){var a=[],s=module.exports.smma(e,n),h=module.exports.smma(e,_),u=module.exports.smma(e,r);h.splice(0,h.length-s.length),u.splice(0,u.length-s.length);for(var o=s.length-1;o>=t-1;o--)a.push([s[o-(t-1)]-h[o-(l-1)],-Math.abs(h[o-(l-1)]-u[o-($-1)])]);return a}function recent_high(e,n=25){for(var _=e.length-2,r=n,t=0,l=e[e.length-1];_>=0&&(e[_]>=l&&r>0?(l=e[_],t=_,r=n):r--,!(r<=0));_--);return{index:t,value:l}}function recent_low(e,n=25){for(var _=e.length-2,r=n,t=0,l=e[e.length-1];_>=0&&(e[_]<=l&&r>0?(l=e[_],t=_,r=n):r--,!(r<=0));_--);return{index:t,value:l}}function support(e,n){var _,r,t=(n=n||recent_low(e)).value;do{for(var l=n.index;l<e.length;l++){var $=(n.value-e[l])/(n.index-l);$<t&&(t=$,_=l)}n.index+1==_&&_!=e.length-1?(n.index=_,t=Math.min.apply(null,e.slice()),n.value=e[n.index],r=!1):r=!0,n.index==e.length-1&&(r=!0)}while(!r);return _==e.length-1||n.index==e.length-1?{calculate:e=>n.value,slope:0,lowest:n.value,index:n.index}:{calculate:e=>e*t+n.value,slope:t,lowest:n.value,index:n.index}}function resistance(e,n){var _,r,t=(n=n||recent_high(e)).value;do{for(var l=n.index;l<e.length;l++){var $=(e[l]-n.value)/(n.index-l);$<t&&(t=$,_=l)}n.index+1==_&&_!=e.length-1?(n.index=_,t=Math.max.apply(null,e.slice()),n.value=e[n.index],r=!1):r=!0,n.index==e.length-1&&(r=!0)}while(!r);return _==e.length-1||n.index==e.length-1?{calculate:e=>n.value,slope:0,highest:n.value,index:n.index}:{calculate:e=>-(e*t)+n.value,slope:t,highest:n.value,index:n.index}}function fisher(e,n){for(var _=[],r=0,t=0,l=n;l<=e.length;l++){var $=e.slice(l-n,l),a=r,s=Math.min.apply(null,$),t=.66*((e[l-1]-s)/(Math.max.apply(null,$)-s)-.5)+.67*t;t>.99&&(t=.999),t<-.99&&(t=-.999),r=.5*Math.log((1+t)/(1-t))+.5*a,_.push([r,a])}return _.slice(1,_.length)}function cross(e,n){e.splice(0,e.length-n.length);for(var _=e[0]>n[0],r=[],t=0;t<e.length;t++)e[t]<n[t]&&_&&(r.push({index:t,cross:!1}),_=!1),e[t]>n[t]&&!_&&(r.push({index:t,cross:!0}),_=!0);return r}function se(e,n){return n=n||e.length,module.exports.std(e)/n**.5}function halftrend(e,n,_,r){for(var t=[],l=[0],$=[0],a=[0],s=[0],h=void 0,u=n;u<=e.length;u++){var o=e.slice(u-n,u);maxlow=o[o.length-2][2],minhigh=o[o.length-2][0];var i=r*(atr2=(atr2=module.exports.atr(o,n))[atr2.length-1]/2),p=Math.max.apply(null,o.slice(o.length-1,o.length).map(e=>e[0])),g=Math.min.apply(null,o.slice(o.length-1,o.length).map(e=>e[2])),v=module.exports.sma(o.slice(o.length-_,_).map(e=>e[0]),_),f=module.exports.sma(o.slice(o.length-_,_).map(e=>e[2]),_);if(1==l[l.length-1]?(maxlow=Math.max(g,maxlow),v[0]<maxlow&&o[o.length-1][1]<o[o.length-2][2]&&($.push(1),l.push(0),minhigh=o[o.length-2][0])):(minhigh=Math.min(p,minhigh),f[0]>minhigh&&o[o.length-1][1]<o[o.length-2][0]&&($.push(0),l.push(1),maxlow=g)),0==$[$.length-1]){isNaN($[$.length-2])||0==$[$.length-2]?a.push(isNaN(a[a.length-2])?maxlow:Math.max(a[a.length-2],maxlow)):a.push(isNaN(s[s.length-2])?s[s.length-1]:s[s.length-2]),h="long";var c=a[a.length-1]+i,m=a[a.length-1]-i}else{isNaN($[$.length-2])||1==$[$.length-2]?s.push(isNaN(s[s.length-2])?minhigh:Math.min(minhigh,s[s.length-2])):s.push(isNaN(a[a.len-2])?a[a.length-1]:a[a.length-2]),h="short";var c=s[s.length-1]+i,m=s[s.length-1]-i}t.push([c,0==$[$.length-1]?a[a.length-1]:s[s.length-1],m,h])}return t}const sum=e=>e.reduce((e,n)=>e+n);function covariance(e,n,_){for(var r=[],t=module.exports.sma(e,e.length),l=module.exports.sma(n,n.length),$=_;$<=e.length;$++){for(var a=e.slice($-_,$),s=n.slice($-_,$),t=module.exports.sma(a,_),h=[],l=module.exports.sma(s,_),u=0;u<_;u++)h.push((a[u]-t[0])*(s[u]-l[0]));h=module.exports.sum(h),r.push(h/_)}return r}const range=(e,n,_)=>Math.floor(_?_()*(Math.floor(n)-Math.ceil(e))+Math.ceil(e):Math.random()*(Math.floor(n)-Math.ceil(e))+Math.ceil(e)),pick=(e,n)=>e[Math.floor(n?n()*Math.floor(e.length):Math.random()*Math.floor(e.length))],float=(e,n,_)=>_?_()*(n-e)+e:Math.random()*(n-e)+e;function order(e,n){var _=[];e=e.slice();do{var r=Math.floor(n?n()*Math.floor(e.length):Math.random()*Math.floor(e.length));_.push(e[r]),e.splice(r,1)}while(e.length>0);return _}function prng(e){for(var n=0,_=1779033703^e.length;n<e.length;n++)_=(_=Math.imul(_^e.charCodeAt(n),3432918353))<<13|_>>>19;return _=Math.imul((_=Math.imul(_^_>>>16,2246822507))^_>>>13,3266489909),e=(_^=_>>>16)>>>0,function(){var n=e+=1831565813;return n=Math.imul(n^n>>>15,1|n),(((n^=n+Math.imul(n^n>>>7,61|n))^n>>>14)>>>0)/4294967296}}function ncdf(e,n,_){var r=1/(1+.2315419*Math.abs(e=n||_?(e-n)/_:e)),t=.3989423*Math.exp(-e*e/2)*r*(.3193815+r*(-.3565638+r*(1.781478+r*(-1.821256+1.330274*r))));return e>0?1-t:t}function zigzag(e,n=.05){var _=[],r=1/0,t=-1/0,l=!1,$=!1,a=[];if(Array.isArray(e[0]))for(var s=0;s<e.length;s++)if(l){_[_.length-1].value>=e[s][1]&&(_[_.length-1].value=e[s][1],_[_.length-1].index=s),r>=e[s][1]&&(r=e[s][1]);var h=(e[s][0]-r)/r;h>n&&(_.push({index:s,value:e[s][0]}),$=!0,l=!1,r=1/0)}else if($){_[_.length-1].value<=e[s][0]&&(_[_.length-1].value=e[s][0],_[_.length-1].index=s),t<=e[s][1]&&(t=e[s][1]);var u=(t-e[s][1])/e[s][1];u>n&&(_.push({index:s,value:e[s][1]}),l=!0,$=!1,t=-1/0)}else{r>=e[s][1]&&(r=e[s][1]),t<=e[s][0]&&(t=e[s][0]);var h=(e[s][0]-r)/r,u=(t-e[s][1])/t;u>n&&h<n?(l=!0,_.push({index:0,value:e[0][0]}),_.push({index:s,value:e[s][1]})):h>n&&u<n?($=!0,_.push({index:0,value:e[0][1]}),_.push({index:s,value:e[s][0]})):u>h?(l=!0,_.push({index:0,value:e[0][0]}),_.push({index:s,value:e[s][1]})):($=!0,_.push({index:0,value:e[0][1]}),_.push({index:s,value:e[s][0]}))}else for(var s=0;s<e.length;s++)if(l){_[_.length-1].value>=e[s]&&(_[_.length-1].value=e[s],_[_.length-1].index=s),r>=e[s]&&(r=e[s]);var h=(e[s]-r)/r;h>n&&(_.push({index:s,value:e[s]}),$=!0,l=!1,r=1/0)}else if($){_[_.length-1].value<=e[s]&&(_[_.length-1].value=e[s],_[_.length-1].index=s),t<=e[s]&&(t=e[s]);var u=(t-e[s])/e[s];u>n&&(_.push({index:s,value:e[s]}),l=!0,$=!1,t=-1/0)}else{r>=e[s]&&(r=e[s]),t<=e[s]&&(t=e[s]);var h=(e[s]-r)/r,u=(t-e[s])/t;u>n&&h<n?(l=!0,_.push({index:0,value:e[0]}),_.push({index:s,value:e[s]})):h>n&&u<n?($=!0,_.push({index:0,value:e[0]}),_.push({index:s,value:e[s]})):u>h?(l=!0,_.push({index:0,value:e[0]}),_.push({index:s,value:e[s]})):($=!0,_.push({index:0,value:e[0]}),_.push({index:s,value:e[s]}))}a=[_[0].value];for(var s=1;s<_.length;s++)for(var o=_[s].index-_[s-1].index,i=(_[s].value-_[s-1].value)/o,p=1;p<=o;p++)a.push(p*i+_[s-1].value);return a}function psar(e,n=.02,_=.2){for(var r=e[0],t=!0,l=n,$=e[0],a=e[0][1],s=e[0][0],h=[a],u=1;u<e.length;u++)a+=l*(s-a),t?(a=Math.min(a,r[1],$[1]),e[u][0]>s&&(s=e[u][0],l=Math.min(l+n,_))):(a=Math.max(a,r[0],$[0]),e[u][1]<s&&(s=e[u][0],l=Math.min(l+n,_))),(t&&e[u][1]<a||!t&&e[u][0]>a)&&(l=n,a=s,s=(t=!t)?e[u][0]:e[u][1]),r=$,$=e[u],h.push(a);return h}function fibbands(e,n=20,_=3){for(var r=0,t=[],l=[],$=module.exports.vwma(e,n);r<e.length;r++)if(t.push(e[r][0]),t.length>=n){var a=module.exports.std(t,n);l.push(a*_),t.splice(0,1)}for(var r=0,s=[];r<$.length;r++){var h=$[r]+.236*l[r],u=$[r]+.382*l[r],o=$[r]+.5*l[r],i=$[r]+.618*l[r],p=$[r]+.764*l[r],g=$[r]+l[r],v=$[r]-.236*l[r],f=$[r]-.382*l[r],c=$[r]-.5*l[r],m=$[r]-.618*l[r],x=$[r]-.764*l[r],d=$[r]-l[r];s.push([g,p,i,o,u,h,$[r],v,f,c,m,x,d])}return s}function supertrend(e,n=20,_=3){for(var r=n-1,t=module.exports.atr(e,n),l=[];r<e.length;r++)l.push([(e[r][0]+e[r][2])/2+_*t[r],(e[r][0]+e[r][2])/2-_*t[r]]);return l}function cwma(e,n){for(var _=n.length,r=[];_<=e.length;_++){for(var t=e.slice(_-n.length,_),l=0,$=0,a=0;a<n.length;a++)l+=t[a]*n[a],$+=n[a];r.push(l/$)}return r}const fibnumbers=[0,1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,1597,2584,4181],permutations=e=>e.reduce((e,n)=>e*n);function mse(e,n){for(var _=0,r=0;_<e.length;_++)r+=Math.pow(n[_]-e[_],2);return r/e.length}function cum(e,n){for(var _=n,r=[];_<=e.length;_++)r.push(module.exports.sum(e.slice(_-n,_)));return r}function vwwma(e,n=20){e=e.map(e=>[e[0]*e[1],e[1]]);for(var _=1,r=0;_<=n;_++)r+=_;for(var _=n,t=[];_<=e.length;_++){var l=e.slice(_-n,_),$=0,a=0;for(var s in l)$+=l[s][1]*(Number(s)+1)/r,a+=l[s][0]*(Number(s)+1)/r;t.push(a/$)}return t}function elderray(e,n=13){for(var _=n,r=[];_<=e.length;_++){var t=e.slice(_-n,_),l=Math.min.apply(void 0,t),$=Math.max.apply(void 0,t),a=module.exports.ema(t,t.length);r.push([$-a[0],l-a[0]])}return r}function hv(e,n=10){for(var _=n,r=[];_<=e.length;_++){var t=ssd(e.slice(_-n,_))/n;r.push(Math.sqrt(t))}return r}const t_table=[{value:.5,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},{value:.25,1:1,2:.816,3:.765,4:.741,5:.727,6:.718,7:.711,8:.706,9:.703,10:.7,11:.697,12:.695,13:.694,14:.692,15:.691,16:.69,17:.689,18:.688,19:.688,20:.687,21:.686,22:.686,23:.685,24:.685,25:.684},{value:.2,1:1.376,2:1.061,3:.978,4:.941,5:.92,6:.906,7:.896,8:.889,9:.883,10:.879,11:.876,12:.873,13:.87,14:.868,15:.866,16:.865,17:.863,18:.862,19:.861,20:.86,21:.859,22:.858,23:.858,24:.857,25:.856},{value:.15,1:1.963,2:1.386,3:1.25,4:1.19,5:1.156,6:1.134,7:1.119,8:1.108,9:1.1,10:1.093,11:1.088,12:1.088,13:1.079,14:1.076,15:1.074,16:1.071,17:1.069,18:1.067,19:1.066,20:1.064,21:1.063,22:1.061,23:1.06,24:1.059,25:1.058},{value:.1,1:3.078,2:1.886,3:1.638,4:1.533,5:1.476,6:1.44,7:1.415,8:1.397,9:1.383,10:1.372,11:1.363,12:1.356,13:1.35,14:1.345,15:1.341,16:1.337,17:1.333,18:1.33,19:1.328,20:1.325,21:1.323,22:1.321,23:1.319,24:1.318,25:1.316},{value:.05,1:6.314,2:2.92,3:2.353,4:2.132,5:2.015,6:1.943,7:1.895,8:1.86,9:1.833,10:1.812,11:1.796,12:1.782,13:1.771,14:1.761,15:1.753,16:1.746,17:1.74,18:1.734,19:1.729,20:1.725,21:1.721,22:1.717,23:1.714,24:1.711,25:1.708},{value:.025,1:12.71,2:4.303,3:3.182,4:2.776,5:2.571,6:2.447,7:2.365,8:2.306,9:2.262,10:2.228,11:2.201,12:2.179,13:2.16,14:2.145,15:2.131,16:2.12,17:2.11,18:2.101,19:2.093,20:2.086,21:2.08,22:2.074,23:2.069,24:2.064,25:2.06},{value:.01,1:31.82,2:6.965,3:4.541,4:3.747,5:3.365,6:3.143,7:2.998,8:2.896,9:2.821,10:2.764,11:2.718,12:2.681,13:2.65,14:2.624,15:2.602,16:2.583,17:2.567,18:2.552,19:2.539,20:2.528,21:2.518,22:2.508,23:2.5,24:2.492,25:2.485},{value:.005,1:63.66,2:9.925,3:5.841,4:4.604,5:4.032,6:3.707,7:3.499,8:3.355,9:3.25,10:3.169,11:3.106,12:3.055,13:3.012,14:2.977,15:2.947,16:2.921,17:2.898,18:2.878,19:2.861,20:2.845,21:2.831,22:2.819,23:2.807,24:2.797,25:2.787},{value:.001,1:318.13,2:22.327,3:10.215,4:7.173,5:5.893,6:5.208,7:4.785,8:4.501,9:4.297,10:4.144,11:4.025,12:3.93,13:3.852,14:3.787,15:3.733,16:3.686,17:3.646,18:3.61,19:3.579,20:3.552,21:3.527,22:3.505,23:3.485,24:3.467,25:3.45},{value:5e-4,1:636.62,2:31.599,3:12.924,4:8.61,5:6.869,6:5.959,7:5.408,8:5.041,9:4.781,10:4.587,11:4.437,12:4.318,13:4.221,14:4.14,15:4.073,16:4.015,17:3.965,18:3.922,19:3.883,20:3.85,21:3.819,22:3.792,23:3.768,24:3.745,25:3.725}];function pvalue(e,n){if(n>25)throw Error("ta.js | pvalue | df too high!");if(n<1)throw Error("ta.js | pvalue | df too low!");for(var _=0;_<t_table.length-1;_++)if(e>=t_table[_][Number(n).toString()]&&e<=t_table[Number(_)+1][Number(n).toString()])return t_table[_+1].value+(t_table[Number(_)+1].value-t_table[_].value)*(t_table[_+1][Number(n).toString()]-e)/(t_table[_][Number(n).toString()]-t_table[_+1][Number(n).toString()]);return 1e-4}function rvi(e,n=20){for(var _=3,r=[],t=[],l=[];_<e.length;_++)if(r.push((e[_][3]-e[_][0]+2*(e[_][3]-e[_-1][0])+2*(e[_][3]-e[_-2][0])+(e[_][3]-e[_-3][0]))/6),t.push((e[_][1]-e[_][2]+2*(e[_][1]-e[_-1][2])+2*(e[_][1]-e[_-2][2])+(e[_][1]-e[_-3][2]))/6),r.length>=n){var $=module.exports.sma(r,n),a=module.exports.sma(t,n);l.push($[0]/a[0]),r.splice(0,1),t.splice(0,1)}return l}function rvi_signal(e){for(var n=3,_=[];n<e.length;n++)_.push((e[n]+2*e[n-1]+2*e[n-2]+e[n-3])/6);return _}function rsi_divergence(e,n,_){_||(_=module.exports.wrsi);var r=_(e,n),t=[];e=module.exports.mom(e.slice(n-1,e.length),2);for(var l=0;l<e.length;l++)e[l]>0&&r[l]<0||e[l]<0&&r[l]>0?t.push(1):t.push(0);return t}function divergence(e,n){e.length>n.length&&e.splice(0,e.length-n.length),n.length>e.length&&n.splice(0,n.length-e.length);for(var _=1,r=[];_<e.length;_++)e[_]>e[_-1]&&n[_]<n[_-1]||e[_]<e[_-1]&&n[_]>n[_-1]?r.push(1):r.push(0);return r}function times_up(e,n){for(var _=[],r=n;r<e.length;r++){for(var t=1,l=r-n+1;l<=r;l++)if(e[l-1]>e[l]){t=0;break}_.push(t)}return _}function times_down(e,n){for(var _=[],r=n;r<e.length;r++){for(var t=1,l=r-n+1;l<=r;l++)if(e[l-1]<e[l]){t=0;break}_.push(t)}return _}const random={range,pick,float,order,prng};const aroon={up:aroon_up,down:aroon_down,osc:aroon_osc};
